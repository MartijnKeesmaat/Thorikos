{"version":3,"sources":["gridCodes.js","helpers.js","draw-map.js","map.js","draw-tree-map.js","draw-bar-chart.js","index.js","../../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["grid","normalize","value","min","max","getMap","data","map","forEach","e","key","update","svg","spatialGrid","t","d3","transition","duration","values","i","highestValue","selectAll","attr","d","text","drawGrid","enter","append","column","row","exit","remove","macro","console","log","fetch","then","response","json","handleData","select","newData","filter","SEASON","formatData","spatialGrid2","setTimeout","countMacroCodes","createSpatialGrid","finding","getContextNumberDetails","CONTEXT","year","noMacroInObject","contextNumber","regex","contextNumberSearch","exec","meso","micro","square","tempObj","push","showMacroButton","document","querySelector","addEventListener","showMacro","showValueButton","showValue","isShowMacro","getElementById","checked","isShowValue","querySelectorAll","style","opacity","margin","top","right","bottom","left","aspect","minHeight","categories","split","colors","schemeSet2","shapeObjects","getShapeObjectData","treemap","padding","round","call","zoom","on","event","transform","g","onresize","_","draw","root","hierarchy","sum","sort","a","b","resizing","width","baseHeight","innerWidth","innerHeight","height","size","leaves","rects","name","x0","y0","x1","y1","counter","coords","mouse","children","labels","f","html","mapped","obj","Object","keys","drawBarChart","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","length","module"],"mappings":"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CAC,AHNI,ADGkBgD,EAAAA,CICvB,IJD4B,EGGrBuD,AFNOD,ADGgB,CAAjB,QGGb,GFNK,GAAwB;AEO9B,AFNCpG,AHDF,AEGmC+C,AHH5B,AKGP,AHGA,EELE/C,ADEiC+C,MAAM,CCFhC,AJDO/E,CICNiC,ADEiC,CAA5B,ECFb,CAAY,IJDP,CAAmBhC,KAAnB,EAA0BC,GAA1B,EAA+BC,GAA/B,CICL,CJDyC;AOOzCkJ,AHLD,ADC6CrE,AHF5C,AEMF,EKAEqE,AJJ4CrE,IAAI,EAAE,CII3C,APNA,COMCwE,APNAvJ,IOMR,CPNa,EOMEmJ,CPNClJ,GOMG,APNZ,COMasJ,IAAL,APNSrJ,COMCiF,EPNE,GOMZ,APNelF,COMC,EPNxB,COMQ,APNf,EOMoC,CAArB,IAA0B,GAA1B,GAAgCuJ,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDEN,ANNK,AECQ,AHDd,AKED,AHIAlH,CCLA,CIKEkH,GLAG,CKAC,ALAA,CKACO,EDCEpB,ALPO7H,MAAT,CAAgBC,CMMrB,ALAG,CKAaiJ,ALAlB,CDNO,ACOJzH,EIAH,ALP4BvB,ECM5B,CICwB,AJAhB,MKDN,CAA6ByI,CNNxB,EAAkC,ACOjCjH,IKDN,EAAsCgH,ELCxB,EKD4B,CAACS,WAA3C;ADEA,ACDD,ANNC,AEAF,ADMgB,ICLd5E,EFDMpE,CAAC,ECMWuB,CDNRtB,AECJ,EFDM,CAACC,AECJ,IADX,ADM4B,CAACsB,IAAT,CDNR,CCMI,EDNYrB,QAAhB,CAAyB,GAAzB,CAAV;AKQA,ALPA,AEDF,AHCO,AEKS,CADhB,EAEGmB,CCLD+C,EGMI,ALPEjE,CCIR,CAEQ,CFNQb,GCAF,CECH,EFDMQ,ADAV,CGCO,AHDSP,EEMfgC,CCPR,CHCO,EAAsB,AEMjB,IDNgB,CAAC/B,GAAZ,CAAgB,UAAAY,CAAC;AKQ9B,ACDJ,ANPkC,AEDlC,AHEE,AEKU,IKCR4I,AJLF9I,EHDMV,GAAG,AEKKgC,CIEN,CLR4BpB,CAAC,AEE7B,AHDI,CCD0BjB,CKQ1BuI,ACDA,APNZ,CGCW,EIKI,CNPiB,CKQxB,AHTV,ADO0B,CAACnG,CIEvB,ACDJ,GLD0B,CAAd;AIGT,ALT+B,AEDlC,AHIEhC,AEGU,CAFZ,CFDEA,CMIA,ALPe,CKSb,ALTF,AEGA8E,EHAI,CAAC5E,IMMIkI,GAAP,AHNQ,AHAV,CAAa,CMMC,CHND,QHAAjI,CGAS4E,AHAR,EAAI,GGAL,CAAe,EAAf,CAJf;AGWI,ACFJ,ANPE,AEFF,AHKI,IGAFC,EFHMlE,EKSAuH,ANNEjI,COIDsJ,CJJD,CHAK,EGAF,CHAKvJ,CMMD,AHXf,AHKiB,CAAC,EMMA,ACFlB,ANPoB,CKSD,ECFE,ANPEM,EAAE,CKSD2H,ALTEtI,GKSC,ALTJ,CKSKwI,ALTE1H,EDGb,CAAb,EMMc,CLTK,CKSY2H,ALTjC,KKSgB,CAAuB,+DAAvB,CAAd;ACDF,ANNAjI,AEGFwE,AHDI,AEGJ,EDLExE,ECKI2B,CDLD,CMMCwH,ANLD1I,EDCG,CAACd,CGCC,CAACC,CHDC,CAACE,CEGG,CDLd,CMMA,ANLa,ADCH,CAAR,AEGe,CKCD,AJHlB,CAAmB,AHDAH,GCFjB,ADEoB,CAACG,CCAlBJ,EDAiB,AEGhBiC,CFHa,CCFjB,CAEQ1B,AECUU,CAAD,AHDW,CAAX,CGCIJ,AHDnB,CGCe,EAAU,CDEV,CFFVZ,AEEUD,GDLjB,ADGU,CAACI,AEEU,CDFlBM,CCEsB,CFFf,CAAH,OCHP,CAGcF,CAHd,EAIGQ,IAJH,CAIQ,MAJR,EAIgB,UAAAC,CAAC;AKIf,ACDA,ANHe,AEAjB+D,AHAC,AEED,ECFAA,CHJA,GEMM1E,EIEA+H,AHJA,CAACpH,ADEE,CCFH,CFAgBA,AEAtB,CFAuB,ACEXR,CDFYb,CEAZa,ADEE,CIEZ,AJFayB,CCFD,CGIC,AHJA+C,CFAO,GCEV,CAAU,KCFV,CAAcpE,ADEd,CCFA,CAAZ,ADE8BQ,MAAlB,CAAyB,KAAzB,CAAZ,CADyB,CAGzB,MDJuD,wBAAUJ,CAAC,CAACrB,KAAZ,EAAmB,CAAnB,EAAsBkB,YAAtB,CAAjC,SAA0E,MAA/E;AKKb,ACDH,ANJgB,AEClB,AHAC,CGFF,EFHE,EALuC,CASmE,GDCnGb,GAAP,CMIWuI,UAAU,CAACH,OAAO,CAAC,CAAD,CAAR,CAAjB;AACD,AHHLxG,AHDC,AEGC,KCFG,CAAC,ADEEM,OAAO,GAAGnC,CCFb,CAAL,CACG8B,CDCmB,CAACM,ECFvB,CACQ,GDCU,CAAY,MCDtBL,IDCsBlB,CAAC,GCDf;AGGb,ACDD4I,ANJAnJ,AEEc,ADCe,EKC7BmJ,ANJAnJ,GAAG,CACAS,GECegB,EDCelB,CKCvB,ALDwB,CAACwB,EKCtBG,ANJb,CACa,CECa,CAACR,CDCM,GCDf,CDC2B,CDH7C,AEEc,CIES,CAAC,ANFrBhC,CCC0B,GDH7B,CAEQO,OME4B,INJpC,EAGGW,IAHH,CAGQ,UAAAD,CAAC;AMEP,ANFO,AEDK,ADCe,CCF/B,EAEGa,ADAe,CAAhB,GCFF,CIIQ6H,AJFA,GFAO1I,CAAC,CMEH,ANFIrB,GMED8D,ENFL,AEAH1B,IAAI,EIEY,CAACoC,gBAAT,CAA0B,wBAA1B,CAAZ;ADEF,ALJS,AEAC,ADEV,GDLA,GCKM7D,GIEC,AHJO0B,GGId,KJFiB,ECFO,CAACD,ADELM,ICFI,CAAd,KDEoB,CAACtC,IAAD,CAA9B;AIGD,ACFG,ANFH,AEDW,ADGV,CCLF,KDKQuC,GKAC,IAAI1B,CAAC,GAAG,CAAb,ALAgB,EKAAA,CAAC,ALAEyB,GKACqH,KAAK,CAACC,CLAG,CAACzH,IKA9B,EAAkCtB,CAAC,ALAN,CAA/B,CKAE,EAAuC;AACrC,ALCJ,UKDQ+H,MAAM,CAACJ,QLCNlI,EKDD,CAAkBqJ,ALC1B,EAAcpJ,GKDiB,CAACM,CAAD,CAAL,CAASsI,IAA3B,ALCR,MKD6CP,MAAM,CAACV,YAAP,EAAzC,EAAgE;ADGtE,ACFQY,ANFD,AEDP,ADKEtG,EAAAA,MKFMsG,CDECN,ALJOrH,AEDPc,GDKG,CAAC,IDJN,CMEW,ANFO3B,CKIzB,ACFmBqJ,AJHnB,CGKoBlB,AHLAzI,CFCb,EKIP,ALJ8BO,CMEN,AJHxB,CGKyB,ACFAM,ALEN,CKFK,AJHE,CIGR,CAAV,MNFD,EAAoC;AKKzC,ACFK,ANFL,AEDA,ADKE,MDJID,AEDAsE,GGKC,CAAC,ELJI,GKICuD,ALJElI,GKIR,AHLW,EGKAmI,CHLGvD,IDKZ7E,CDJiB,CKInB,ALJoBL,CKID,AJAxB,EDJa,A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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["export const grid = [\n  0,\n  196,\n  195,\n  197,\n  200,\n  202,\n  203,\n  204,\n  206,\n  207,\n  151,\n  152,\n  157,\n  156,\n  159,\n  169,\n  168,\n  167,\n  166,\n  165,\n  0,\n  194,\n  193,\n  198,\n  199,\n  201,\n  209,\n  208,\n  205,\n  177,\n  150,\n  153,\n  154,\n  155,\n  158,\n  160,\n  161,\n  162,\n  163,\n  164,\n  104,\n  102,\n  101,\n  103,\n  105,\n  106,\n  107,\n  108,\n  109,\n  110,\n  111,\n  112,\n  113,\n  114,\n  115,\n  116,\n  117,\n  118,\n  119,\n  0,\n  0,\n  252,\n  0,\n  0,\n  253,\n  184,\n  183,\n  182,\n  129,\n  130,\n  131,\n  132,\n  133,\n  134,\n  135,\n  137,\n  138,\n  139,\n  0,\n  0,\n  0,\n  251,\n  0,\n  191,\n  187,\n  185,\n  186,\n  181,\n  121,\n  123,\n  145,\n  144,\n  142,\n  140,\n  136,\n  127,\n  128,\n  0,\n  0,\n  0,\n  0,\n  250,\n  192,\n  190,\n  188,\n  178,\n  179,\n  180,\n  120,\n  122,\n  147,\n  146,\n  143,\n  141,\n  124,\n  125,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  189,\n  0,\n  0,\n  172,\n  171,\n  173,\n  174,\n  175,\n  176,\n  170,\n  126,\n  0,\n  0,\n  0,\n  0,\n  0\n];\n","export function normalize(value, min, max) {\n  return (value - min) / (max - min);\n}\n\nexport function getMap(data) {\n  const map = {};\n\n  data.forEach(e => {\n    const key = e['SHAPE OBJECT'];\n    if (!map[key]) map[key] = 1;\n    else map[key]++;\n  });\n  return map;\n}\n","import { normalize } from './helpers';\n\nexport function update(svg, spatialGrid) {\n  const t = d3.transition().duration(750);\n  const values = spatialGrid.map(i => i.value);\n  const highestValue = d3.max(values);\n\n  svg\n    .selectAll('rect')\n    .data(spatialGrid)\n    .transition(t)\n    .attr('fill', d => (d.value ? `rgba(127, 205, 144, ${normalize(d.value, 0, highestValue)})` : '#fff')); // TODO Create a slider for the 500\n\n  svg\n    .selectAll('.value')\n    .data(spatialGrid)\n    .text(d => d.value);\n}\n\nexport function drawGrid(svg, spatialGrid) {\n  const values = spatialGrid.map(i => i.value);\n  const highestValue = d3.max(values);\n\n  svg\n    .selectAll('rect')\n    .data(spatialGrid)\n    .enter()\n    .append('rect')\n    .attr('x', (d, i) => d.column * 50)\n    .attr('y', (d, i) => d.row * 50)\n    .attr('fill', d => (d.value ? `rgba(127, 205, 144, ${normalize(d.value, 0, highestValue)})` : '#fff')) // TODO Create a slider for the 500\n    .attr('width', 50)\n    .attr('height', 50)\n    .exit()\n    .remove();\n\n  svg\n    .selectAll('.macro')\n    .data(spatialGrid)\n    .enter()\n    .append('text')\n    .attr('class', 'macro')\n    .text(d => (d.macro ? d.macro : ''))\n    .attr('x', (d, i) => d.column * 50 + 15)\n    .attr('y', (d, i) => d.row * 50 + 25);\n\n  svg\n    .selectAll('.value')\n    .data(spatialGrid)\n    .enter()\n    .append('text')\n    .attr('class', 'value')\n    .text(d => d.value)\n    .attr('x', (d, i) => d.column * 50 + 15)\n    .attr('y', (d, i) => d.row * 50 + 40);\n}\n","console.log('load map');\n\n// Distribute to seperate file\nimport { grid } from './gridCodes';\nimport { drawGrid, update } from './draw-map';\n\n// Load data file\n// TODO make this dynamic with an upload button\nfetch('data.json')\n  .then(response => response.json())\n  .then(json => handleData(json));\n\nconst handleData = data => {\n  const svg = d3.select('.map').append('svg');\n\n  // Format data\n  const newData = data.filter(i => i.SEASON == 2013);\n\n  const spatialGrid = formatData(data);\n  const spatialGrid2 = formatData(newData);\n\n  drawGrid(svg, spatialGrid);\n\n  setTimeout(() => {\n    update(svg, spatialGrid2);\n  }, 2000);\n\n  setTimeout(() => {\n    update(svg, spatialGrid);\n  }, 4000);\n};\n\nfunction formatData(data) {\n  let map = {};\n  map = countMacroCodes(data, map);\n  return createSpatialGrid(map);\n}\n\n/**\n * @param {arr} data (needs to contain an CONTEXT key)\n * @param {obj} map (empty)\n * @returns {obj} a map of the occurances of each macro code\n */\nfunction countMacroCodes(data, map) {\n  data.map(finding => {\n    const macro = getContextNumberDetails(finding.CONTEXT).macro;\n    const year = getContextNumberDetails(finding.CONTEXT).year;\n\n    // Only show the first year of the macro square: 124\n    if (year == 12 && macro == 124) return;\n    const noMacroInObject = !map[macro];\n    if (noMacroInObject) map[macro] = 1;\n    else map[macro]++;\n  });\n  return map;\n}\n\n/**\n   * @param {str} contextNumber (\"T13-124-1-A\")\n   * @returns {obj} of the individual values of the context code (see below)\n      \"T13-124-1-A\"\n      13 = year\n      124 = macro\n      1 = meso\n      A = micro\n   */\nfunction getContextNumberDetails(contextNumber) {\n  if (!contextNumber) return '';\n\n  const regex = /T(\\d{2})?-?(\\d{3})?-?([1234])?-?([ABCD1234])/g;\n  const contextNumberSearch = regex.exec(contextNumber);\n\n  return {\n    contextNumber: contextNumberSearch[0] || null,\n    year: contextNumberSearch[1] || null,\n    macro: contextNumberSearch[2] || null,\n    meso: contextNumberSearch[3] || null,\n    micro: contextNumberSearch[4] || null\n  };\n}\n\nfunction createSpatialGrid(map) {\n  const spatialGrid = [];\n\n  let row = 0;\n  let column = 0;\n\n  grid.forEach((square, i) => {\n    if (i % 20 === 0 && i !== 0) {\n      column = 0;\n      row++;\n    }\n\n    const tempObj = {\n      macro: square,\n      value: map[square],\n      column,\n      row\n    };\n\n    column++;\n    spatialGrid.push(tempObj);\n  });\n\n  return spatialGrid;\n}\n\nconst showMacroButton = document.querySelector('#showMacro');\nshowMacroButton.addEventListener('click', showMacro);\n\nconst showValueButton = document.querySelector('#showValue');\nshowValueButton.addEventListener('click', showValue);\n\nlet isShowMacro = document.getElementById('showMacro').checked;\nlet isShowValue = document.getElementById('showValue').checked;\n\nfunction showMacro() {\n  if (!isShowMacro) document.querySelectorAll('.macro').forEach(i => (i.style.opacity = 1));\n  else document.querySelectorAll('.macro').forEach(i => (i.style.opacity = 0));\n  isShowMacro = !isShowMacro;\n}\n\nfunction showValue() {\n  if (!isShowValue) document.querySelectorAll('.value').forEach(i => (i.style.opacity = 0.4));\n  else document.querySelectorAll('.value').forEach(i => (i.style.opacity = 0));\n  isShowValue = !isShowValue;\n}\n","import { normalize, getMap } from './helpers';\n\n// https://bl.ocks.org/HarryStevens/545ca9d50cb9abbd68bfee526b0541f9\nconst margin = { top: 0, right: 0, bottom: 0, left: 0 },\n  aspect = 0.85,\n  minHeight = 400,\n  duration = 1000,\n  categories = 'abcdef'.split(''),\n  colors = {};\n\ncategories.forEach((d, i) => {\n  colors[d] = d3.schemeSet2[i];\n});\n\nfetch('data.json')\n  .then(response => response.json())\n  .then(json => handleData(json));\n\nfunction handleData(data) {\n  const shapeObjects = getShapeObjectData(data);\n\n  const treemap = d3\n    .treemap()\n    .padding(1)\n    .round(true);\n\n  const svg = d3\n    .select('.treemap')\n    .append('svg')\n    .call(\n      d3.zoom().on('zoom', function() {\n        svg.attr('transform', d3.event.transform);\n      })\n    );\n\n  const g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  onresize = _ => draw(true);\n\n  let root = d3\n    .hierarchy(shapeObjects)\n    .sum(d => d.value)\n    .sort((a, b) => b.value - a.value);\n  draw();\n\n  function draw(resizing) {\n    // width = innerWidth - margin.left - margin.right;\n    const width = 1000;\n    let baseHeight = innerWidth * aspect;\n    baseHeight = baseHeight < minHeight ? minHeight : baseHeight > innerHeight ? innerHeight : baseHeight;\n    // height = baseHeight - margin.top - margin.bottom;\n    const height = 500;\n\n    svg.attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n    g.attr('transform', `translate(${margin.left}, ${margin.top})`);\n    treemap.size([width, height]);\n\n    const leaves = treemap(root).leaves();\n    const rects = svg.selectAll('.rect').data(leaves, d => d.data.name);\n\n    if (resizing) {\n      rects.exit().remove();\n\n      rects\n        .attr('transform', d => `translate(${d.x0},${d.y0})`)\n        .attr('width', d => d.x1 - d.x0)\n        .attr('height', d => d.y1 - d.y0);\n    } else {\n      rects\n        .transition()\n        .duration(500)\n        .attr('transform', d => `translate(${d.x0},${d.y0})`)\n        .attr('width', d => d.x1 - d.x0)\n        .attr('height', d => d.y1 - d.y0);\n\n      rects\n        .exit()\n        .style('opacity', 1)\n        .transition()\n        .duration(duration)\n        .style('opacity', 1e-6)\n        .remove();\n    }\n\n    let counter = 104;\n\n    rects\n      .enter()\n      .append('rect')\n      .attr('class', 'rect')\n      .style('fill', (d, i) => {\n        counter--;\n        return `rgba(127, 205, 144, ${0.3 + normalize(counter, 0, 104)})`;\n      })\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\n      .attr('width', d => d.x1 - d.x0)\n      .attr('height', d => d.y1 - d.y0)\n      .style('opacity', 1e-6)\n      .on('click', function(d) {\n        var coords = d3.mouse(this);\n        // console.log(this);\n        // console.log(d.data.name);\n        // console.log(d.data.value);\n\n        const newData = {\n          name: 'root',\n          children: [\n            {\n              name: 'ao',\n              children: [{ name: d.data.name, value: d.data.value }]\n            }\n          ]\n        };\n\n        root = d3\n          .hierarchy(newData)\n          .sum(d => d.value)\n          .sort((a, b) => b.value - a.value);\n\n        draw();\n      })\n      .on('mouseover', function(d) {\n        this.style.opacity = 0.6;\n      })\n      .on('mouseleave', function(d) {\n        this.style.opacity = 1;\n      })\n      .transition()\n      .duration(duration)\n      .style('opacity', 1);\n\n    const labels = svg.selectAll('.label').data(\n      leaves.filter(f => f.x1 - f.x0 > 60 && f.y1 - f.y0 > 30),\n      d => d.data.name\n    );\n\n    if (resizing) {\n      labels.exit().remove();\n\n      labels\n        .html(d => `<tspan style='font-weight: 500'>${d.data.name}</tspan><tspan dx=10>${d.data.value}</tspan>`)\n        .attr('transform', d => `translate(${d.x0}, ${d.y0})`);\n    } else {\n      labels\n        .exit()\n        .style('opacity', 1)\n        .transition()\n        .duration(duration)\n        .style('opacity', 1e-6)\n        .remove();\n\n      labels\n        .html(d => `<tspan style='font-weight: 500'>${d.data.name}</tspan><tspan dx=10>${d.data.value}</tspan>`)\n        .transition()\n        .duration(duration)\n        .attr('transform', d => `translate(${d.x0}, ${d.y0})`);\n    }\n\n    labels\n      .enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('dy', 16)\n      .attr('dx', 5)\n      .attr('fill', '#fff')\n      .attr('transform', d => `translate(${d.x0}, ${d.y0})`)\n      .html(d => `<tspan style='font-weight: 500'>${d.data.name}</tspan><tspan dx=10>${d.data.value}</tspan>`)\n      .style('opacity', 1e-6)\n      .transition()\n      .duration(duration)\n      .style('opacity', 1);\n  }\n}\n\nfunction getShapeObjectData(data) {\n  const mapped = getMap(data, 'SHAPE OBJECT');\n\n  const obj = {\n    name: 'root',\n    children: [\n      {\n        name: 'a',\n        children: []\n      }\n    ]\n  };\n\n  Object.values(mapped).forEach((e, i) => {\n    obj.children[0].children.push({\n      name: Object.keys(mapped)[i],\n      value: e\n    });\n  });\n\n  return obj;\n}\n","export function drawBarChart() {\n  console.log('load draw bar chart');\n}\n","import './styles.scss';\nimport { map } from './map';\nimport { treemap } from './draw-tree-map';\nimport { drawBarChart } from './draw-bar-chart';\ndrawBarChart();\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}