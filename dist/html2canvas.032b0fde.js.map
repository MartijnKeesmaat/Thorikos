{"version":3,"sources":["html2canvas.js"],"names":["e","exports","module","define","amd","f","window","global","self","html2canvas","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","root","freeExports","freeModule","freeGlobal","punycode","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","key","error","type","RangeError","map","array","fn","mapDomain","string","split","join","ucs2decode","output","counter","value","extra","charCodeAt","push","ucs2encode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","inputLength","out","bias","basic","j","index","oldi","w","baseMinusT","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","domain","test","slice","toLowerCase","toASCII","version","ucs2","nodeType","hasOwnProperty","log","restoreOwnerScroll","ownerDocument","x","y","defaultView","pageXOffset","pageYOffset","scrollTo","cloneCanvasContents","canvas","clonedCanvas","width","height","getContext","putImageData","getImageData","cloneNode","node","javascriptEnabled","clone","document","createTextNode","nodeValue","child","firstChild","nodeName","appendChild","nextSibling","_scrollTop","scrollTop","_scrollLeft","scrollLeft","initNode","containerDocument","options","documentElement","container","createElement","className","style","visibility","position","left","top","border","scrolling","body","Promise","resolve","documentClone","contentWindow","onload","interval","setInterval","childNodes","clearInterval","navigator","userAgent","scrollY","scrollX","open","write","replaceChild","adoptNode","close","Color","g","b","result","fromArray","namedColor","rgb","rgba","hex6","hex3","prototype","darken","amount","round","isTransparent","isBlack","Array","isArray","min","_hex3","match","parseInt","_hex6","substring","_rgb","Number","_rgba","toString","color","colors","isColor","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Support","CanvasRenderer","ImageLoader","NodeParser","NodeContainer","utils","createWindowClone","loadUrlDocument","getBounds","html2canvasNodeAttribute","html2canvasCloneIndex","nodeList","logging","start","Date","now","async","allowTaint","removeContainer","imageTimeout","renderer","strict","proxy","reject","innerWidth","innerHeight","absoluteUrl","then","renderWindow","undefined","setAttribute","renderDocument","onrendered","html2canvasExport","Object","create","windowWidth","windowHeight","html2canvasIndex","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","support","imageLoader","bounds","documentWidth","documentHeight","parser","ready","crop","cleanupContainer","parentNode","removeChild","croppedCanvas","x1","max","x2","y1","y2","drawImage","doc","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","url","link","href","smallImage","DummyImageContainer","src","promise","image","Image","onerror","complete","Font","family","size","img","span","sampleText","baseline","middle","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","lineWidth","FontMetrics","data","getMetrics","FrameContainer","sameOrigin","proxyLoad","URL","GradientContainer","imageData","colorStops","x0","y0","TYPES","LINEAR","RADIAL","REGEXP_COLORSTOP","ImageContainer","cors","tainted","crossOrigin","ProxyImageContainer","SVGContainer","SVGNodeContainer","LinearGradientContainer","WebkitGradientContainer","bind","origin","getOrigin","location","findImages","nodes","images","reduce","imageNodes","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","imageExists","isSVG","svg","replace","isSameOrigin","useCORS","isInline","some","protocol","hostname","port","getPromise","timeout","dummy","get","found","fetch","all","timer","race","res","setTimeout","clearTimeout","apply","arguments","hasDirection","REGEXP_DIRECTION","reverse","ratio","parseFloat","isNaN","colorStop","colorStopMatch","unit","stop","find","count","logger","console","Function","parseBackgrounds","offsetBounds","parent","stack","borders","clip","backgroundClip","visible","computedStyles","styles","backgroundImages","transformData","transformMatrix","isPseudoElement","opacity","cloneTo","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","css","hasAttribute","getAttribute","attribute","computedStyle","before","prefixedCss","prefixes","prefix","substr","toUpperCase","getComputedStyle","cssInt","fontWeight","weight","parseClip","matches","CLIP","right","bottom","cssList","property","trim","isPercentage","parseBackgroundSize","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transform","parseMatrix","MATRIX_PROPERTY","getValue","tagName","selectionValue","placeholder","option","selectedIndex","text","matrix3d","indexOf","str","TextContainer","PseudoElementContainer","StackingContext","element","range","renderQueue","background","rectangle","canvasBackground","visibile","createPseudoHideStyles","disableAnimations","flatten","getChildren","getPseudoElements","fontMetrics","calculateOverflowClips","isElement","createStackingContexts","sortStackingContexts","parse","paint","renderIndex","asyncRenderer","appendToDOM","parseBorders","cssClip","hasParentClip","cleanDOM","isTextNode","queue","asyncTimer","createStyles","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","hidePseudoElements","innerHTML","ELEMENT_NODE","getPseudoElement","after","toCamelCase","content","display","stripQuotes","isImage","pseudoNode","pseudoContainer","item","parentContainer","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","parentStack","getParentStack","contexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sort","zIndexSort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","backupText","createRange","setStart","setEnd","getBoundingClientRect","ClearTransform","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","isStackingContext","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","calculateBorders","checked","font","circleStroke","circle","ceil","properties","message","textContent","applyTextTransform","characters","letterRendering","noLetterSpacing","hasUnicode","getWords","character","fontShadow","clearShadow","renderTextDecoration","metrics","borderColorTransforms","inset","nodeBounds","getBorderRadiusData","side","colorTransform","parseBackgroundClip","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","topLeftOuter","topLeftInner","topRightOuter","topRightInner","bottomRightOuter","bottomRightInner","bottomLeftOuter","bottomLeftInner","borderArgs","parseCorner","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","borderData","radius1","radius2","outer1","inner1","outer2","inner2","corner1","corner2","arr","asInt","zIndex","context","nodeContainer","arrays","first","words","onWordBoundary","word","isWordBoundary","characterCode","XHR","decode64","Proxy","proxyUrl","supportsCORS","XMLHttpRequest","createCallback","createProxyUrl","jsonp","response","proxyCount","ProxyURL","supportsCORSImage","cleanup","random","encodeURIComponent","documentFromHTML","html","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","insertBefore","getHideClass","Renderer","paddingLeft","paddingTop","paddingRight","paddingBottom","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","repeat","backgroundRepeatShape","renderBackgroundRepeat","taintCtx","textBaseline","variables","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","point","rect","variant","setVariable","globalAlpha","translate","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","addColorStop","ownStacking","testRangeBounds","testCORS","testSVG","testElement","rangeHeight","selectNode","toDataURL","hasFabric","inlineFormatting","fabric","loadSVGFromString","createCanvas","removeContentType","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","atob","_native","XMLSerializer","serializeToString","parseSVGDocument","capitalize","p1","p2","base64","chars","len","encoded1","encoded2","encoded3","encoded4","byte1","byte2","byte3","clientRect","offsetParent","offsetLeft","whitespace","definition","prefix_i","block","mode","numParen","quote","appendResult","c","xhr","status","responseText","statusText","send"],"mappings":"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","file":"html2canvas.032b0fde.js","sourceRoot":"../src","sourcesContent":["/*\n  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>\n  Copyright (c) 2016 Niklas von Hertzen\n\n  Released under  License\n*/\n\n!(function(e) {\n  if ('object' == typeof exports && 'undefined' != typeof module) module.exports = e();\n  else if ('function' == typeof define && define.amd) define([], e);\n  else {\n    var f;\n    'undefined' != typeof window ? (f = window) : 'undefined' != typeof global ? (f = global) : 'undefined' != typeof self && (f = self), (f.html2canvas = e());\n  }\n})(function() {\n  var define, module, exports;\n  return (function e(t, n, r) {\n    function s(o, u) {\n      if (!n[o]) {\n        if (!t[o]) {\n          var a = typeof require == 'function' && require;\n          if (!u && a) return a(o, !0);\n          if (i) return i(o, !0);\n          var f = new Error(\"Cannot find module '\" + o + \"'\");\n          throw ((f.code = 'MODULE_NOT_FOUND'), f);\n        }\n        var l = (n[o] = { exports: {} });\n        t[o][0].call(\n          l.exports,\n          function(e) {\n            var n = t[o][1][e];\n            return s(n ? n : e);\n          },\n          l,\n          l.exports,\n          e,\n          t,\n          n,\n          r\n        );\n      }\n      return n[o].exports;\n    }\n    var i = typeof require == 'function' && require;\n    for (var o = 0; o < r.length; o++) s(r[o]);\n    return s;\n  })(\n    {\n      1: [\n        function(_dereq_, module, exports) {\n          (function(global) {\n            /*! http://mths.be/punycode v1.2.4 by @mathias */\n            (function(root) {\n              /** Detect free variables */\n              var freeExports = typeof exports == 'object' && exports;\n              var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;\n              var freeGlobal = typeof global == 'object' && global;\n              if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n                root = freeGlobal;\n              }\n\n              /**\n               * The `punycode` object.\n               * @name punycode\n               * @type Object\n               */\n              var punycode,\n                /** Highest positive signed 32-bit float value */\n                maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n                /** Bootstring parameters */\n                base = 36,\n                tMin = 1,\n                tMax = 26,\n                skew = 38,\n                damp = 700,\n                initialBias = 72,\n                initialN = 128, // 0x80\n                delimiter = '-', // '\\x2D'\n                /** Regular expressions */\n                regexPunycode = /^xn--/,\n                regexNonASCII = /[^ -~]/, // unprintable ASCII chars + non-ASCII chars\n                regexSeparators = /\\x2E|\\u3002|\\uFF0E|\\uFF61/g, // RFC 3490 separators\n                /** Error messages */\n                errors = {\n                  overflow: 'Overflow: input needs wider integers to process',\n                  'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n                  'invalid-input': 'Invalid input'\n                },\n                /** Convenience shortcuts */\n                baseMinusTMin = base - tMin,\n                floor = Math.floor,\n                stringFromCharCode = String.fromCharCode,\n                /** Temporary variable */\n                key;\n\n              /*--------------------------------------------------------------------------*/\n\n              /**\n               * A generic error utility function.\n               * @private\n               * @param {String} type The error type.\n               * @returns {Error} Throws a `RangeError` with the applicable error message.\n               */\n              function error(type) {\n                throw RangeError(errors[type]);\n              }\n\n              /**\n               * A generic `Array#map` utility function.\n               * @private\n               * @param {Array} array The array to iterate over.\n               * @param {Function} callback The function that gets called for every array\n               * item.\n               * @returns {Array} A new array of values returned by the callback function.\n               */\n              function map(array, fn) {\n                var length = array.length;\n                while (length--) {\n                  array[length] = fn(array[length]);\n                }\n                return array;\n              }\n\n              /**\n               * A simple `Array#map`-like wrapper to work with domain name strings.\n               * @private\n               * @param {String} domain The domain name.\n               * @param {Function} callback The function that gets called for every\n               * character.\n               * @returns {Array} A new string of characters returned by the callback\n               * function.\n               */\n              function mapDomain(string, fn) {\n                return map(string.split(regexSeparators), fn).join('.');\n              }\n\n              /**\n               * Creates an array containing the numeric code points of each Unicode\n               * character in the string. While JavaScript uses UCS-2 internally,\n               * this function will convert a pair of surrogate halves (each of which\n               * UCS-2 exposes as separate characters) into a single code point,\n               * matching UTF-16.\n               * @see `punycode.ucs2.encode`\n               * @see <http://mathiasbynens.be/notes/javascript-encoding>\n               * @memberOf punycode.ucs2\n               * @name decode\n               * @param {String} string The Unicode input string (UCS-2).\n               * @returns {Array} The new array of code points.\n               */\n              function ucs2decode(string) {\n                var output = [],\n                  counter = 0,\n                  length = string.length,\n                  value,\n                  extra;\n                while (counter < length) {\n                  value = string.charCodeAt(counter++);\n                  if (value >= 0xd800 && value <= 0xdbff && counter < length) {\n                    // high surrogate, and there is a next character\n                    extra = string.charCodeAt(counter++);\n                    if ((extra & 0xfc00) == 0xdc00) {\n                      // low surrogate\n                      output.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n                    } else {\n                      // unmatched surrogate; only append this code unit, in case the next\n                      // code unit is the high surrogate of a surrogate pair\n                      output.push(value);\n                      counter--;\n                    }\n                  } else {\n                    output.push(value);\n                  }\n                }\n                return output;\n              }\n\n              /**\n               * Creates a string based on an array of numeric code points.\n               * @see `punycode.ucs2.decode`\n               * @memberOf punycode.ucs2\n               * @name encode\n               * @param {Array} codePoints The array of numeric code points.\n               * @returns {String} The new Unicode string (UCS-2).\n               */\n              function ucs2encode(array) {\n                return map(array, function(value) {\n                  var output = '';\n                  if (value > 0xffff) {\n                    value -= 0x10000;\n                    output += stringFromCharCode(((value >>> 10) & 0x3ff) | 0xd800);\n                    value = 0xdc00 | (value & 0x3ff);\n                  }\n                  output += stringFromCharCode(value);\n                  return output;\n                }).join('');\n              }\n\n              /**\n               * Converts a basic code point into a digit/integer.\n               * @see `digitToBasic()`\n               * @private\n               * @param {Number} codePoint The basic numeric code point value.\n               * @returns {Number} The numeric value of a basic code point (for use in\n               * representing integers) in the range `0` to `base - 1`, or `base` if\n               * the code point does not represent a value.\n               */\n              function basicToDigit(codePoint) {\n                if (codePoint - 48 < 10) {\n                  return codePoint - 22;\n                }\n                if (codePoint - 65 < 26) {\n                  return codePoint - 65;\n                }\n                if (codePoint - 97 < 26) {\n                  return codePoint - 97;\n                }\n                return base;\n              }\n\n              /**\n               * Converts a digit/integer into a basic code point.\n               * @see `basicToDigit()`\n               * @private\n               * @param {Number} digit The numeric value of a basic code point.\n               * @returns {Number} The basic code point whose value (when used for\n               * representing integers) is `digit`, which needs to be in the range\n               * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n               * used; else, the lowercase form is used. The behavior is undefined\n               * if `flag` is non-zero and `digit` has no uppercase form.\n               */\n              function digitToBasic(digit, flag) {\n                //  0..25 map to ASCII a..z or A..Z\n                // 26..35 map to ASCII 0..9\n                return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n              }\n\n              /**\n               * Bias adaptation function as per section 3.4 of RFC 3492.\n               * http://tools.ietf.org/html/rfc3492#section-3.4\n               * @private\n               */\n              function adapt(delta, numPoints, firstTime) {\n                var k = 0;\n                delta = firstTime ? floor(delta / damp) : delta >> 1;\n                delta += floor(delta / numPoints);\n                for (; /* no initialization */ delta > (baseMinusTMin * tMax) >> 1; k += base) {\n                  delta = floor(delta / baseMinusTMin);\n                }\n                return floor(k + ((baseMinusTMin + 1) * delta) / (delta + skew));\n              }\n\n              /**\n               * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n               * symbols.\n               * @memberOf punycode\n               * @param {String} input The Punycode string of ASCII-only symbols.\n               * @returns {String} The resulting string of Unicode symbols.\n               */\n              function decode(input) {\n                // Don't use UCS-2\n                var output = [],\n                  inputLength = input.length,\n                  out,\n                  i = 0,\n                  n = initialN,\n                  bias = initialBias,\n                  basic,\n                  j,\n                  index,\n                  oldi,\n                  w,\n                  k,\n                  digit,\n                  t,\n                  /** Cached calculation results */\n                  baseMinusT;\n\n                // Handle the basic code points: let `basic` be the number of input code\n                // points before the last delimiter, or `0` if there is none, then copy\n                // the first basic code points to the output.\n\n                basic = input.lastIndexOf(delimiter);\n                if (basic < 0) {\n                  basic = 0;\n                }\n\n                for (j = 0; j < basic; ++j) {\n                  // if it's not a basic code point\n                  if (input.charCodeAt(j) >= 0x80) {\n                    error('not-basic');\n                  }\n                  output.push(input.charCodeAt(j));\n                }\n\n                // Main decoding loop: start just after the last delimiter if any basic code\n                // points were copied; start at the beginning otherwise.\n\n                for (index = basic > 0 ? basic + 1 : 0; index < inputLength /* no final expression */; ) {\n                  // `index` is the index of the next character to be consumed.\n                  // Decode a generalized variable-length integer into `delta`,\n                  // which gets added to `i`. The overflow checking is easier\n                  // if we increase `i` as we go, then subtract off its starting\n                  // value at the end to obtain `delta`.\n                  for (oldi = i, w = 1, k = base /* no condition */; ; k += base) {\n                    if (index >= inputLength) {\n                      error('invalid-input');\n                    }\n\n                    digit = basicToDigit(input.charCodeAt(index++));\n\n                    if (digit >= base || digit > floor((maxInt - i) / w)) {\n                      error('overflow');\n                    }\n\n                    i += digit * w;\n                    t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n                    if (digit < t) {\n                      break;\n                    }\n\n                    baseMinusT = base - t;\n                    if (w > floor(maxInt / baseMinusT)) {\n                      error('overflow');\n                    }\n\n                    w *= baseMinusT;\n                  }\n\n                  out = output.length + 1;\n                  bias = adapt(i - oldi, out, oldi == 0);\n\n                  // `i` was supposed to wrap around from `out` to `0`,\n                  // incrementing `n` each time, so we'll fix that now:\n                  if (floor(i / out) > maxInt - n) {\n                    error('overflow');\n                  }\n\n                  n += floor(i / out);\n                  i %= out;\n\n                  // Insert `n` at position `i` of the output\n                  output.splice(i++, 0, n);\n                }\n\n                return ucs2encode(output);\n              }\n\n              /**\n               * Converts a string of Unicode symbols to a Punycode string of ASCII-only\n               * symbols.\n               * @memberOf punycode\n               * @param {String} input The string of Unicode symbols.\n               * @returns {String} The resulting Punycode string of ASCII-only symbols.\n               */\n              function encode(input) {\n                var n,\n                  delta,\n                  handledCPCount,\n                  basicLength,\n                  bias,\n                  j,\n                  m,\n                  q,\n                  k,\n                  t,\n                  currentValue,\n                  output = [],\n                  /** `inputLength` will hold the number of code points in `input`. */\n                  inputLength,\n                  /** Cached calculation results */\n                  handledCPCountPlusOne,\n                  baseMinusT,\n                  qMinusT;\n\n                // Convert the input in UCS-2 to Unicode\n                input = ucs2decode(input);\n\n                // Cache the length\n                inputLength = input.length;\n\n                // Initialize the state\n                n = initialN;\n                delta = 0;\n                bias = initialBias;\n\n                // Handle the basic code points\n                for (j = 0; j < inputLength; ++j) {\n                  currentValue = input[j];\n                  if (currentValue < 0x80) {\n                    output.push(stringFromCharCode(currentValue));\n                  }\n                }\n\n                handledCPCount = basicLength = output.length;\n\n                // `handledCPCount` is the number of code points that have been handled;\n                // `basicLength` is the number of basic code points.\n\n                // Finish the basic string - if it is not empty - with a delimiter\n                if (basicLength) {\n                  output.push(delimiter);\n                }\n\n                // Main encoding loop:\n                while (handledCPCount < inputLength) {\n                  // All non-basic code points < n have been handled already. Find the next\n                  // larger one:\n                  for (m = maxInt, j = 0; j < inputLength; ++j) {\n                    currentValue = input[j];\n                    if (currentValue >= n && currentValue < m) {\n                      m = currentValue;\n                    }\n                  }\n\n                  // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n                  // but guard against overflow\n                  handledCPCountPlusOne = handledCPCount + 1;\n                  if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n                    error('overflow');\n                  }\n\n                  delta += (m - n) * handledCPCountPlusOne;\n                  n = m;\n\n                  for (j = 0; j < inputLength; ++j) {\n                    currentValue = input[j];\n\n                    if (currentValue < n && ++delta > maxInt) {\n                      error('overflow');\n                    }\n\n                    if (currentValue == n) {\n                      // Represent delta as a generalized variable-length integer\n                      for (q = delta, k = base /* no condition */; ; k += base) {\n                        t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n                        if (q < t) {\n                          break;\n                        }\n                        qMinusT = q - t;\n                        baseMinusT = base - t;\n                        output.push(stringFromCharCode(digitToBasic(t + (qMinusT % baseMinusT), 0)));\n                        q = floor(qMinusT / baseMinusT);\n                      }\n\n                      output.push(stringFromCharCode(digitToBasic(q, 0)));\n                      bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n                      delta = 0;\n                      ++handledCPCount;\n                    }\n                  }\n\n                  ++delta;\n                  ++n;\n                }\n                return output.join('');\n              }\n\n              /**\n               * Converts a Punycode string representing a domain name to Unicode. Only the\n               * Punycoded parts of the domain name will be converted, i.e. it doesn't\n               * matter if you call it on a string that has already been converted to\n               * Unicode.\n               * @memberOf punycode\n               * @param {String} domain The Punycode domain name to convert to Unicode.\n               * @returns {String} The Unicode representation of the given Punycode\n               * string.\n               */\n              function toUnicode(domain) {\n                return mapDomain(domain, function(string) {\n                  return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n                });\n              }\n\n              /**\n               * Converts a Unicode string representing a domain name to Punycode. Only the\n               * non-ASCII parts of the domain name will be converted, i.e. it doesn't\n               * matter if you call it with a domain that's already in ASCII.\n               * @memberOf punycode\n               * @param {String} domain The domain name to convert, as a Unicode string.\n               * @returns {String} The Punycode representation of the given domain name.\n               */\n              function toASCII(domain) {\n                return mapDomain(domain, function(string) {\n                  return regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n                });\n              }\n\n              /*--------------------------------------------------------------------------*/\n\n              /** Define the public API */\n              punycode = {\n                /**\n                 * A string representing the current Punycode.js version number.\n                 * @memberOf punycode\n                 * @type String\n                 */\n                version: '1.2.4',\n                /**\n                 * An object of methods to convert from JavaScript's internal character\n                 * representation (UCS-2) to Unicode code points, and back.\n                 * @see <http://mathiasbynens.be/notes/javascript-encoding>\n                 * @memberOf punycode\n                 * @type Object\n                 */\n                ucs2: {\n                  decode: ucs2decode,\n                  encode: ucs2encode\n                },\n                decode: decode,\n                encode: encode,\n                toASCII: toASCII,\n                toUnicode: toUnicode\n              };\n\n              /** Expose `punycode` */\n              // Some AMD build optimizers, like r.js, check for specific condition patterns\n              // like the following:\n              if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n                define('punycode', function() {\n                  return punycode;\n                });\n              } else if (freeExports && !freeExports.nodeType) {\n                if (freeModule) {\n                  // in Node.js or RingoJS v0.8.0+\n                  freeModule.exports = punycode;\n                } else {\n                  // in Narwhal or RingoJS v0.7.0-\n                  for (key in punycode) {\n                    punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n                  }\n                }\n              } else {\n                // in Rhino or a web browser\n                root.punycode = punycode;\n              }\n            })(this);\n          }.call(this, typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {}));\n        },\n        {}\n      ],\n      2: [\n        function(_dereq_, module, exports) {\n          var log = _dereq_('./log');\n\n          function restoreOwnerScroll(ownerDocument, x, y) {\n            if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n              ownerDocument.defaultView.scrollTo(x, y);\n            }\n          }\n\n          function cloneCanvasContents(canvas, clonedCanvas) {\n            try {\n              if (clonedCanvas) {\n                clonedCanvas.width = canvas.width;\n                clonedCanvas.height = canvas.height;\n                clonedCanvas.getContext('2d').putImageData(canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n              }\n            } catch (e) {\n              log('Unable to copy canvas content from', canvas, e);\n            }\n          }\n\n          function cloneNode(node, javascriptEnabled) {\n            var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n            var child = node.firstChild;\n            while (child) {\n              if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n                clone.appendChild(cloneNode(child, javascriptEnabled));\n              }\n              child = child.nextSibling;\n            }\n\n            if (node.nodeType === 1) {\n              clone._scrollTop = node.scrollTop;\n              clone._scrollLeft = node.scrollLeft;\n              if (node.nodeName === 'CANVAS') {\n                cloneCanvasContents(node, clone);\n              } else if (node.nodeName === 'TEXTAREA' || node.nodeName === 'SELECT') {\n                clone.value = node.value;\n              }\n            }\n\n            return clone;\n          }\n\n          function initNode(node) {\n            if (node.nodeType === 1) {\n              node.scrollTop = node._scrollTop;\n              node.scrollLeft = node._scrollLeft;\n\n              var child = node.firstChild;\n              while (child) {\n                initNode(child);\n                child = child.nextSibling;\n              }\n            }\n          }\n\n          module.exports = function(ownerDocument, containerDocument, width, height, options, x, y) {\n            var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\n            var container = containerDocument.createElement('iframe');\n\n            container.className = 'html2canvas-container';\n            container.style.visibility = 'hidden';\n            container.style.position = 'fixed';\n            container.style.left = '-10000px';\n            container.style.top = '0px';\n            container.style.border = '0';\n            container.width = width;\n            container.height = height;\n            container.scrolling = 'no'; // ios won't scroll without it\n            containerDocument.body.appendChild(container);\n\n            return new Promise(function(resolve) {\n              var documentClone = container.contentWindow.document;\n\n              /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n              container.contentWindow.onload = container.onload = function() {\n                var interval = setInterval(function() {\n                  if (documentClone.body.childNodes.length > 0) {\n                    initNode(documentClone.documentElement);\n                    clearInterval(interval);\n                    if (options.type === 'view') {\n                      container.contentWindow.scrollTo(x, y);\n                      if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\n                        documentClone.documentElement.style.top = -y + 'px';\n                        documentClone.documentElement.style.left = -x + 'px';\n                        documentClone.documentElement.style.position = 'absolute';\n                      }\n                    }\n                    resolve(container);\n                  }\n                }, 50);\n              };\n\n              documentClone.open();\n              documentClone.write('<!DOCTYPE html><html></html>');\n              // Chrome scrolls the parent document for some reason after the write to the cloned window???\n              restoreOwnerScroll(ownerDocument, x, y);\n              documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\n              documentClone.close();\n            });\n          };\n        },\n        { './log': 13 }\n      ],\n      3: [\n        function(_dereq_, module, exports) {\n          // http://dev.w3.org/csswg/css-color/\n\n          function Color(value) {\n            this.r = 0;\n            this.g = 0;\n            this.b = 0;\n            this.a = null;\n            var result = this.fromArray(value) || this.namedColor(value) || this.rgb(value) || this.rgba(value) || this.hex6(value) || this.hex3(value);\n          }\n\n          Color.prototype.darken = function(amount) {\n            var a = 1 - amount;\n            return new Color([Math.round(this.r * a), Math.round(this.g * a), Math.round(this.b * a), this.a]);\n          };\n\n          Color.prototype.isTransparent = function() {\n            return this.a === 0;\n          };\n\n          Color.prototype.isBlack = function() {\n            return this.r === 0 && this.g === 0 && this.b === 0;\n          };\n\n          Color.prototype.fromArray = function(array) {\n            if (Array.isArray(array)) {\n              this.r = Math.min(array[0], 255);\n              this.g = Math.min(array[1], 255);\n              this.b = Math.min(array[2], 255);\n              if (array.length > 3) {\n                this.a = array[3];\n              }\n            }\n\n            return Array.isArray(array);\n          };\n\n          var _hex3 = /^#([a-f0-9]{3})$/i;\n\n          Color.prototype.hex3 = function(value) {\n            var match = null;\n            if ((match = value.match(_hex3)) !== null) {\n              this.r = parseInt(match[1][0] + match[1][0], 16);\n              this.g = parseInt(match[1][1] + match[1][1], 16);\n              this.b = parseInt(match[1][2] + match[1][2], 16);\n            }\n            return match !== null;\n          };\n\n          var _hex6 = /^#([a-f0-9]{6})$/i;\n\n          Color.prototype.hex6 = function(value) {\n            var match = null;\n            if ((match = value.match(_hex6)) !== null) {\n              this.r = parseInt(match[1].substring(0, 2), 16);\n              this.g = parseInt(match[1].substring(2, 4), 16);\n              this.b = parseInt(match[1].substring(4, 6), 16);\n            }\n            return match !== null;\n          };\n\n          var _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\n\n          Color.prototype.rgb = function(value) {\n            var match = null;\n            if ((match = value.match(_rgb)) !== null) {\n              this.r = Number(match[1]);\n              this.g = Number(match[2]);\n              this.b = Number(match[3]);\n            }\n            return match !== null;\n          };\n\n          var _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\n\n          Color.prototype.rgba = function(value) {\n            var match = null;\n            if ((match = value.match(_rgba)) !== null) {\n              this.r = Number(match[1]);\n              this.g = Number(match[2]);\n              this.b = Number(match[3]);\n              this.a = Number(match[4]);\n            }\n            return match !== null;\n          };\n\n          Color.prototype.toString = function() {\n            return this.a !== null && this.a !== 1 ? 'rgba(' + [this.r, this.g, this.b, this.a].join(',') + ')' : 'rgb(' + [this.r, this.g, this.b].join(',') + ')';\n          };\n\n          Color.prototype.namedColor = function(value) {\n            value = value.toLowerCase();\n            var color = colors[value];\n            if (color) {\n              this.r = color[0];\n              this.g = color[1];\n              this.b = color[2];\n            } else if (value === 'transparent') {\n              this.r = this.g = this.b = this.a = 0;\n              return true;\n            }\n\n            return !!color;\n          };\n\n          Color.prototype.isColor = true;\n\n          // JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\n          var colors = {\n            aliceblue: [240, 248, 255],\n            antiquewhite: [250, 235, 215],\n            aqua: [0, 255, 255],\n            aquamarine: [127, 255, 212],\n            azure: [240, 255, 255],\n            beige: [245, 245, 220],\n            bisque: [255, 228, 196],\n            black: [0, 0, 0],\n            blanchedalmond: [255, 235, 205],\n            blue: [0, 0, 255],\n            blueviolet: [138, 43, 226],\n            brown: [165, 42, 42],\n            burlywood: [222, 184, 135],\n            cadetblue: [95, 158, 160],\n            chartreuse: [127, 255, 0],\n            chocolate: [210, 105, 30],\n            coral: [255, 127, 80],\n            cornflowerblue: [100, 149, 237],\n            cornsilk: [255, 248, 220],\n            crimson: [220, 20, 60],\n            cyan: [0, 255, 255],\n            darkblue: [0, 0, 139],\n            darkcyan: [0, 139, 139],\n            darkgoldenrod: [184, 134, 11],\n            darkgray: [169, 169, 169],\n            darkgreen: [0, 100, 0],\n            darkgrey: [169, 169, 169],\n            darkkhaki: [189, 183, 107],\n            darkmagenta: [139, 0, 139],\n            darkolivegreen: [85, 107, 47],\n            darkorange: [255, 140, 0],\n            darkorchid: [153, 50, 204],\n            darkred: [139, 0, 0],\n            darksalmon: [233, 150, 122],\n            darkseagreen: [143, 188, 143],\n            darkslateblue: [72, 61, 139],\n            darkslategray: [47, 79, 79],\n            darkslategrey: [47, 79, 79],\n            darkturquoise: [0, 206, 209],\n            darkviolet: [148, 0, 211],\n            deeppink: [255, 20, 147],\n            deepskyblue: [0, 191, 255],\n            dimgray: [105, 105, 105],\n            dimgrey: [105, 105, 105],\n            dodgerblue: [30, 144, 255],\n            firebrick: [178, 34, 34],\n            floralwhite: [255, 250, 240],\n            forestgreen: [34, 139, 34],\n            fuchsia: [255, 0, 255],\n            gainsboro: [220, 220, 220],\n            ghostwhite: [248, 248, 255],\n            gold: [255, 215, 0],\n            goldenrod: [218, 165, 32],\n            gray: [128, 128, 128],\n            green: [0, 128, 0],\n            greenyellow: [173, 255, 47],\n            grey: [128, 128, 128],\n            honeydew: [240, 255, 240],\n            hotpink: [255, 105, 180],\n            indianred: [205, 92, 92],\n            indigo: [75, 0, 130],\n            ivory: [255, 255, 240],\n            khaki: [240, 230, 140],\n            lavender: [230, 230, 250],\n            lavenderblush: [255, 240, 245],\n            lawngreen: [124, 252, 0],\n            lemonchiffon: [255, 250, 205],\n            lightblue: [173, 216, 230],\n            lightcoral: [240, 128, 128],\n            lightcyan: [224, 255, 255],\n            lightgoldenrodyellow: [250, 250, 210],\n            lightgray: [211, 211, 211],\n            lightgreen: [144, 238, 144],\n            lightgrey: [211, 211, 211],\n            lightpink: [255, 182, 193],\n            lightsalmon: [255, 160, 122],\n            lightseagreen: [32, 178, 170],\n            lightskyblue: [135, 206, 250],\n            lightslategray: [119, 136, 153],\n            lightslategrey: [119, 136, 153],\n            lightsteelblue: [176, 196, 222],\n            lightyellow: [255, 255, 224],\n            lime: [0, 255, 0],\n            limegreen: [50, 205, 50],\n            linen: [250, 240, 230],\n            magenta: [255, 0, 255],\n            maroon: [128, 0, 0],\n            mediumaquamarine: [102, 205, 170],\n            mediumblue: [0, 0, 205],\n            mediumorchid: [186, 85, 211],\n            mediumpurple: [147, 112, 219],\n            mediumseagreen: [60, 179, 113],\n            mediumslateblue: [123, 104, 238],\n            mediumspringgreen: [0, 250, 154],\n            mediumturquoise: [72, 209, 204],\n            mediumvioletred: [199, 21, 133],\n            midnightblue: [25, 25, 112],\n            mintcream: [245, 255, 250],\n            mistyrose: [255, 228, 225],\n            moccasin: [255, 228, 181],\n            navajowhite: [255, 222, 173],\n            navy: [0, 0, 128],\n            oldlace: [253, 245, 230],\n            olive: [128, 128, 0],\n            olivedrab: [107, 142, 35],\n            orange: [255, 165, 0],\n            orangered: [255, 69, 0],\n            orchid: [218, 112, 214],\n            palegoldenrod: [238, 232, 170],\n            palegreen: [152, 251, 152],\n            paleturquoise: [175, 238, 238],\n            palevioletred: [219, 112, 147],\n            papayawhip: [255, 239, 213],\n            peachpuff: [255, 218, 185],\n            peru: [205, 133, 63],\n            pink: [255, 192, 203],\n            plum: [221, 160, 221],\n            powderblue: [176, 224, 230],\n            purple: [128, 0, 128],\n            rebeccapurple: [102, 51, 153],\n            red: [255, 0, 0],\n            rosybrown: [188, 143, 143],\n            royalblue: [65, 105, 225],\n            saddlebrown: [139, 69, 19],\n            salmon: [250, 128, 114],\n            sandybrown: [244, 164, 96],\n            seagreen: [46, 139, 87],\n            seashell: [255, 245, 238],\n            sienna: [160, 82, 45],\n            silver: [192, 192, 192],\n            skyblue: [135, 206, 235],\n            slateblue: [106, 90, 205],\n            slategray: [112, 128, 144],\n            slategrey: [112, 128, 144],\n            snow: [255, 250, 250],\n            springgreen: [0, 255, 127],\n            steelblue: [70, 130, 180],\n            tan: [210, 180, 140],\n            teal: [0, 128, 128],\n            thistle: [216, 191, 216],\n            tomato: [255, 99, 71],\n            turquoise: [64, 224, 208],\n            violet: [238, 130, 238],\n            wheat: [245, 222, 179],\n            white: [255, 255, 255],\n            whitesmoke: [245, 245, 245],\n            yellow: [255, 255, 0],\n            yellowgreen: [154, 205, 50]\n          };\n\n          module.exports = Color;\n        },\n        {}\n      ],\n      4: [\n        function(_dereq_, module, exports) {\n          var Support = _dereq_('./support');\n          var CanvasRenderer = _dereq_('./renderers/canvas');\n          var ImageLoader = _dereq_('./imageloader');\n          var NodeParser = _dereq_('./nodeparser');\n          var NodeContainer = _dereq_('./nodecontainer');\n          var log = _dereq_('./log');\n          var utils = _dereq_('./utils');\n          var createWindowClone = _dereq_('./clone');\n          var loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n          var getBounds = utils.getBounds;\n\n          var html2canvasNodeAttribute = 'data-html2canvas-node';\n          var html2canvasCloneIndex = 0;\n\n          function html2canvas(nodeList, options) {\n            var index = html2canvasCloneIndex++;\n            options = options || {};\n            if (options.logging) {\n              log.options.logging = true;\n              log.options.start = Date.now();\n            }\n\n            options.async = typeof options.async === 'undefined' ? true : options.async;\n            options.allowTaint = typeof options.allowTaint === 'undefined' ? false : options.allowTaint;\n            options.removeContainer = typeof options.removeContainer === 'undefined' ? true : options.removeContainer;\n            options.javascriptEnabled = typeof options.javascriptEnabled === 'undefined' ? false : options.javascriptEnabled;\n            options.imageTimeout = typeof options.imageTimeout === 'undefined' ? 10000 : options.imageTimeout;\n            options.renderer = typeof options.renderer === 'function' ? options.renderer : CanvasRenderer;\n            options.strict = !!options.strict;\n\n            if (typeof nodeList === 'string') {\n              if (typeof options.proxy !== 'string') {\n                return Promise.reject('Proxy must be used when rendering url');\n              }\n              var width = options.width != null ? options.width : window.innerWidth;\n              var height = options.height != null ? options.height : window.innerHeight;\n              return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n                return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n              });\n            }\n\n            var node = (nodeList === undefined ? [document.documentElement] : nodeList.length ? nodeList : [nodeList])[0];\n            node.setAttribute(html2canvasNodeAttribute + index, index);\n            return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(\n              function(canvas) {\n                if (typeof options.onrendered === 'function') {\n                  log('options.onrendered is deprecated, html2canvas returns a Promise containing the canvas');\n                  options.onrendered(canvas);\n                }\n                return canvas;\n              }\n            );\n          }\n\n          html2canvas.CanvasRenderer = CanvasRenderer;\n          html2canvas.NodeContainer = NodeContainer;\n          html2canvas.log = log;\n          html2canvas.utils = utils;\n\n          var html2canvasExport =\n            typeof document === 'undefined' || typeof Object.create !== 'function' || typeof document.createElement('canvas').getContext !== 'function'\n              ? function() {\n                  return Promise.reject('No canvas support');\n                }\n              : html2canvas;\n\n          module.exports = html2canvasExport;\n\n          if (typeof define === 'function' && define.amd) {\n            define('html2canvas', [], function() {\n              return html2canvasExport;\n            });\n          }\n\n          function renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n            return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(\n              function(container) {\n                log('Document cloned');\n                var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n                var selector = '[' + attributeName + \"='\" + html2canvasIndex + \"']\";\n                document.querySelector(selector).removeAttribute(attributeName);\n                var clonedWindow = container.contentWindow;\n                var node = clonedWindow.document.querySelector(selector);\n                var oncloneHandler = typeof options.onclone === 'function' ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n                return oncloneHandler.then(function() {\n                  return renderWindow(node, container, options, windowWidth, windowHeight);\n                });\n              }\n            );\n          }\n\n          function renderWindow(node, container, options, windowWidth, windowHeight) {\n            var clonedWindow = container.contentWindow;\n            var support = new Support(clonedWindow.document);\n            var imageLoader = new ImageLoader(options, support);\n            var bounds = getBounds(node);\n            var width = options.type === 'view' ? windowWidth : documentWidth(clonedWindow.document);\n            var height = options.type === 'view' ? windowHeight : documentHeight(clonedWindow.document);\n            var renderer = new options.renderer(width, height, imageLoader, options, document);\n            var parser = new NodeParser(node, renderer, support, imageLoader, options);\n            return parser.ready.then(function() {\n              log('Finished rendering');\n              var canvas;\n\n              if (options.type === 'view') {\n                canvas = crop(renderer.canvas, { width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0 });\n              } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n                canvas = renderer.canvas;\n              } else {\n                canvas = crop(renderer.canvas, {\n                  width: options.width != null ? options.width : bounds.width,\n                  height: options.height != null ? options.height : bounds.height,\n                  top: bounds.top,\n                  left: bounds.left,\n                  x: 0,\n                  y: 0\n                });\n              }\n\n              cleanupContainer(container, options);\n              return canvas;\n            });\n          }\n\n          function cleanupContainer(container, options) {\n            if (options.removeContainer) {\n              container.parentNode.removeChild(container);\n              log('Cleaned up container');\n            }\n          }\n\n          function crop(canvas, bounds) {\n            var croppedCanvas = document.createElement('canvas');\n            var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n            var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n            var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n            var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n            croppedCanvas.width = bounds.width;\n            croppedCanvas.height = bounds.height;\n            var width = x2 - x1;\n            var height = y2 - y1;\n            log('Cropping canvas at:', 'left:', bounds.left, 'top:', bounds.top, 'width:', width, 'height:', height);\n            log('Resulting crop with width', bounds.width, 'and height', bounds.height, 'with x', x1, 'and y', y1);\n            croppedCanvas.getContext('2d').drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\n            return croppedCanvas;\n          }\n\n          function documentWidth(doc) {\n            return Math.max(\n              Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n              Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n              Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n            );\n          }\n\n          function documentHeight(doc) {\n            return Math.max(\n              Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n              Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n              Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n            );\n          }\n\n          function absoluteUrl(url) {\n            var link = document.createElement('a');\n            link.href = url;\n            link.href = link.href;\n            return link;\n          }\n        },\n        {\n          './clone': 2,\n          './imageloader': 11,\n          './log': 13,\n          './nodecontainer': 14,\n          './nodeparser': 15,\n          './proxy': 16,\n          './renderers/canvas': 20,\n          './support': 22,\n          './utils': 26\n        }\n      ],\n      5: [\n        function(_dereq_, module, exports) {\n          var log = _dereq_('./log');\n          var smallImage = _dereq_('./utils').smallImage;\n\n          function DummyImageContainer(src) {\n            this.src = src;\n            log('DummyImageContainer for', src);\n            if (!this.promise || !this.image) {\n              log('Initiating DummyImageContainer');\n              DummyImageContainer.prototype.image = new Image();\n              var image = this.image;\n              DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n                image.onload = resolve;\n                image.onerror = reject;\n                image.src = smallImage();\n                if (image.complete === true) {\n                  resolve(image);\n                }\n              });\n            }\n          }\n\n          module.exports = DummyImageContainer;\n        },\n        { './log': 13, './utils': 26 }\n      ],\n      6: [\n        function(_dereq_, module, exports) {\n          var smallImage = _dereq_('./utils').smallImage;\n\n          function Font(family, size) {\n            var container = document.createElement('div'),\n              img = document.createElement('img'),\n              span = document.createElement('span'),\n              sampleText = 'Hidden Text',\n              baseline,\n              middle;\n\n            container.style.visibility = 'hidden';\n            container.style.fontFamily = family;\n            container.style.fontSize = size;\n            container.style.margin = 0;\n            container.style.padding = 0;\n\n            document.body.appendChild(container);\n\n            img.src = smallImage();\n            img.width = 1;\n            img.height = 1;\n\n            img.style.margin = 0;\n            img.style.padding = 0;\n            img.style.verticalAlign = 'baseline';\n\n            span.style.fontFamily = family;\n            span.style.fontSize = size;\n            span.style.margin = 0;\n            span.style.padding = 0;\n\n            span.appendChild(document.createTextNode(sampleText));\n            container.appendChild(span);\n            container.appendChild(img);\n            baseline = img.offsetTop - span.offsetTop + 1;\n\n            container.removeChild(span);\n            container.appendChild(document.createTextNode(sampleText));\n\n            container.style.lineHeight = 'normal';\n            img.style.verticalAlign = 'super';\n\n            middle = img.offsetTop - container.offsetTop + 1;\n\n            document.body.removeChild(container);\n\n            this.baseline = baseline;\n            this.lineWidth = 1;\n            this.middle = middle;\n          }\n\n          module.exports = Font;\n        },\n        { './utils': 26 }\n      ],\n      7: [\n        function(_dereq_, module, exports) {\n          var Font = _dereq_('./font');\n\n          function FontMetrics() {\n            this.data = {};\n          }\n\n          FontMetrics.prototype.getMetrics = function(family, size) {\n            if (this.data[family + '-' + size] === undefined) {\n              this.data[family + '-' + size] = new Font(family, size);\n            }\n            return this.data[family + '-' + size];\n          };\n\n          module.exports = FontMetrics;\n        },\n        { './font': 6 }\n      ],\n      8: [\n        function(_dereq_, module, exports) {\n          var utils = _dereq_('./utils');\n          var getBounds = utils.getBounds;\n          var loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\n\n          function FrameContainer(container, sameOrigin, options) {\n            this.image = null;\n            this.src = container;\n            var self = this;\n            var bounds = getBounds(container);\n            this.promise = (!sameOrigin\n              ? this.proxyLoad(options.proxy, bounds, options)\n              : new Promise(function(resolve) {\n                  if (container.contentWindow.document.URL === 'about:blank' || container.contentWindow.document.documentElement == null) {\n                    container.contentWindow.onload = container.onload = function() {\n                      resolve(container);\n                    };\n                  } else {\n                    resolve(container);\n                  }\n                })\n            )\n              .then(function(container) {\n                var html2canvas = _dereq_('./core');\n                return html2canvas(container.contentWindow.document.documentElement, {\n                  type: 'view',\n                  width: container.width,\n                  height: container.height,\n                  proxy: options.proxy,\n                  javascriptEnabled: options.javascriptEnabled,\n                  removeContainer: options.removeContainer,\n                  allowTaint: options.allowTaint,\n                  imageTimeout: options.imageTimeout / 2\n                });\n              })\n              .then(function(canvas) {\n                return (self.image = canvas);\n              });\n          }\n\n          FrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n            var container = this.src;\n            return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n          };\n\n          module.exports = FrameContainer;\n        },\n        { './core': 4, './proxy': 16, './utils': 26 }\n      ],\n      9: [\n        function(_dereq_, module, exports) {\n          function GradientContainer(imageData) {\n            this.src = imageData.value;\n            this.colorStops = [];\n            this.type = null;\n            this.x0 = 0.5;\n            this.y0 = 0.5;\n            this.x1 = 0.5;\n            this.y1 = 0.5;\n            this.promise = Promise.resolve(true);\n          }\n\n          GradientContainer.TYPES = {\n            LINEAR: 1,\n            RADIAL: 2\n          };\n\n          // TODO: support hsl[a], negative %/length values\n          // TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\n          GradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\n\n          module.exports = GradientContainer;\n        },\n        {}\n      ],\n      10: [\n        function(_dereq_, module, exports) {\n          function ImageContainer(src, cors) {\n            this.src = src;\n            this.image = new Image();\n            var self = this;\n            this.tainted = null;\n            this.promise = new Promise(function(resolve, reject) {\n              self.image.onload = resolve;\n              self.image.onerror = reject;\n              if (cors) {\n                self.image.crossOrigin = 'anonymous';\n              }\n              self.image.src = src;\n              if (self.image.complete === true) {\n                resolve(self.image);\n              }\n            });\n          }\n\n          module.exports = ImageContainer;\n        },\n        {}\n      ],\n      11: [\n        function(_dereq_, module, exports) {\n          var log = _dereq_('./log');\n          var ImageContainer = _dereq_('./imagecontainer');\n          var DummyImageContainer = _dereq_('./dummyimagecontainer');\n          var ProxyImageContainer = _dereq_('./proxyimagecontainer');\n          var FrameContainer = _dereq_('./framecontainer');\n          var SVGContainer = _dereq_('./svgcontainer');\n          var SVGNodeContainer = _dereq_('./svgnodecontainer');\n          var LinearGradientContainer = _dereq_('./lineargradientcontainer');\n          var WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\n          var bind = _dereq_('./utils').bind;\n\n          function ImageLoader(options, support) {\n            this.link = null;\n            this.options = options;\n            this.support = support;\n            this.origin = this.getOrigin(window.location.href);\n          }\n\n          ImageLoader.prototype.findImages = function(nodes) {\n            var images = [];\n            nodes\n              .reduce(function(imageNodes, container) {\n                switch (container.node.nodeName) {\n                  case 'IMG':\n                    return imageNodes.concat([\n                      {\n                        args: [container.node.src],\n                        method: 'url'\n                      }\n                    ]);\n                  case 'svg':\n                  case 'IFRAME':\n                    return imageNodes.concat([\n                      {\n                        args: [container.node],\n                        method: container.node.nodeName\n                      }\n                    ]);\n                }\n                return imageNodes;\n              }, [])\n              .forEach(this.addImage(images, this.loadImage), this);\n            return images;\n          };\n\n          ImageLoader.prototype.findBackgroundImage = function(images, container) {\n            container\n              .parseBackgroundImages()\n              .filter(this.hasImageBackground)\n              .forEach(this.addImage(images, this.loadImage), this);\n            return images;\n          };\n\n          ImageLoader.prototype.addImage = function(images, callback) {\n            return function(newImage) {\n              newImage.args.forEach(function(image) {\n                if (!this.imageExists(images, image)) {\n                  images.splice(0, 0, callback.call(this, newImage));\n                  log('Added image #' + images.length, typeof image === 'string' ? image.substring(0, 100) : image);\n                }\n              }, this);\n            };\n          };\n\n          ImageLoader.prototype.hasImageBackground = function(imageData) {\n            return imageData.method !== 'none';\n          };\n\n          ImageLoader.prototype.loadImage = function(imageData) {\n            if (imageData.method === 'url') {\n              var src = imageData.args[0];\n              if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n                return new SVGContainer(src);\n              } else if (src.match(/data:image\\/.*;base64,/i)) {\n                return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/gi, ''), false);\n              } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n                return new ImageContainer(src, false);\n              } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n                return new ImageContainer(src, true);\n              } else if (this.options.proxy) {\n                return new ProxyImageContainer(src, this.options.proxy);\n              } else {\n                return new DummyImageContainer(src);\n              }\n            } else if (imageData.method === 'linear-gradient') {\n              return new LinearGradientContainer(imageData);\n            } else if (imageData.method === 'gradient') {\n              return new WebkitGradientContainer(imageData);\n            } else if (imageData.method === 'svg') {\n              return new SVGNodeContainer(imageData.args[0], this.support.svg);\n            } else if (imageData.method === 'IFRAME') {\n              return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n            } else {\n              return new DummyImageContainer(imageData);\n            }\n          };\n\n          ImageLoader.prototype.isSVG = function(src) {\n            return src.substring(src.length - 3).toLowerCase() === 'svg' || SVGContainer.prototype.isInline(src);\n          };\n\n          ImageLoader.prototype.imageExists = function(images, src) {\n            return images.some(function(image) {\n              return image.src === src;\n            });\n          };\n\n          ImageLoader.prototype.isSameOrigin = function(url) {\n            return this.getOrigin(url) === this.origin;\n          };\n\n          ImageLoader.prototype.getOrigin = function(url) {\n            var link = this.link || (this.link = document.createElement('a'));\n            link.href = url;\n            link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n            return link.protocol + link.hostname + link.port;\n          };\n\n          ImageLoader.prototype.getPromise = function(container) {\n            return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n              var dummy = new DummyImageContainer(container.src);\n              return dummy.promise.then(function(image) {\n                container.image = image;\n              });\n            });\n          };\n\n          ImageLoader.prototype.get = function(src) {\n            var found = null;\n            return this.images.some(function(img) {\n              return (found = img).src === src;\n            })\n              ? found\n              : null;\n          };\n\n          ImageLoader.prototype.fetch = function(nodes) {\n            this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n            this.images.forEach(function(image, index) {\n              image.promise.then(\n                function() {\n                  log('Succesfully loaded image #' + (index + 1), image);\n                },\n                function(e) {\n                  log('Failed loading image #' + (index + 1), image, e);\n                }\n              );\n            });\n            this.ready = Promise.all(this.images.map(this.getPromise, this));\n            log('Finished searching images');\n            return this;\n          };\n\n          ImageLoader.prototype.timeout = function(container, timeout) {\n            var timer;\n            var promise = Promise.race([\n              container.promise,\n              new Promise(function(res, reject) {\n                timer = setTimeout(function() {\n                  log('Timed out loading image', container);\n                  reject(container);\n                }, timeout);\n              })\n            ]).then(function(container) {\n              clearTimeout(timer);\n              return container;\n            });\n            promise['catch'](function() {\n              clearTimeout(timer);\n            });\n            return promise;\n          };\n\n          module.exports = ImageLoader;\n        },\n        {\n          './dummyimagecontainer': 5,\n          './framecontainer': 8,\n          './imagecontainer': 10,\n          './lineargradientcontainer': 12,\n          './log': 13,\n          './proxyimagecontainer': 17,\n          './svgcontainer': 23,\n          './svgnodecontainer': 24,\n          './utils': 26,\n          './webkitgradientcontainer': 27\n        }\n      ],\n      12: [\n        function(_dereq_, module, exports) {\n          var GradientContainer = _dereq_('./gradientcontainer');\n          var Color = _dereq_('./color');\n\n          function LinearGradientContainer(imageData) {\n            GradientContainer.apply(this, arguments);\n            this.type = GradientContainer.TYPES.LINEAR;\n\n            var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test(imageData.args[0]) || !GradientContainer.REGEXP_COLORSTOP.test(imageData.args[0]);\n\n            if (hasDirection) {\n              imageData.args[0]\n                .split(/\\s+/)\n                .reverse()\n                .forEach(function(position, index) {\n                  switch (position) {\n                    case 'left':\n                      this.x0 = 0;\n                      this.x1 = 1;\n                      break;\n                    case 'top':\n                      this.y0 = 0;\n                      this.y1 = 1;\n                      break;\n                    case 'right':\n                      this.x0 = 1;\n                      this.x1 = 0;\n                      break;\n                    case 'bottom':\n                      this.y0 = 1;\n                      this.y1 = 0;\n                      break;\n                    case 'to':\n                      var y0 = this.y0;\n                      var x0 = this.x0;\n                      this.y0 = this.y1;\n                      this.x0 = this.x1;\n                      this.x1 = x0;\n                      this.y1 = y0;\n                      break;\n                    case 'center':\n                      break; // centered by default\n                    // Firefox internally converts position keywords to percentages:\n                    // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\n                    default:\n                      // percentage or absolute length\n                      // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\n                      var ratio = parseFloat(position, 10) * 1e-2;\n                      if (isNaN(ratio)) {\n                        // invalid or unhandled value\n                        break;\n                      }\n                      if (index === 0) {\n                        this.y0 = ratio;\n                        this.y1 = 1 - this.y0;\n                      } else {\n                        this.x0 = ratio;\n                        this.x1 = 1 - this.x0;\n                      }\n                      break;\n                  }\n                }, this);\n            } else {\n              this.y0 = 0;\n              this.y1 = 1;\n            }\n\n            this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n              var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\n              var value = +colorStopMatch[2];\n              var unit = value === 0 ? '%' : colorStopMatch[3]; // treat \"0\" as \"0%\"\n              return {\n                color: new Color(colorStopMatch[1]),\n                // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\n                stop: unit === '%' ? value / 100 : null\n              };\n            });\n\n            if (this.colorStops[0].stop === null) {\n              this.colorStops[0].stop = 0;\n            }\n\n            if (this.colorStops[this.colorStops.length - 1].stop === null) {\n              this.colorStops[this.colorStops.length - 1].stop = 1;\n            }\n\n            // calculates and fills-in explicit stop positions when omitted from rule\n            this.colorStops.forEach(function(colorStop, index) {\n              if (colorStop.stop === null) {\n                this.colorStops.slice(index).some(function(find, count) {\n                  if (find.stop !== null) {\n                    colorStop.stop = (find.stop - this.colorStops[index - 1].stop) / (count + 1) + this.colorStops[index - 1].stop;\n                    return true;\n                  } else {\n                    return false;\n                  }\n                }, this);\n              }\n            }, this);\n          }\n\n          LinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n          // TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\n          LinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\n\n          module.exports = LinearGradientContainer;\n        },\n        { './color': 3, './gradientcontainer': 9 }\n      ],\n      13: [\n        function(_dereq_, module, exports) {\n          var logger = function() {\n            if (logger.options.logging && window.console && window.console.log) {\n              Function.prototype.bind\n                .call(window.console.log, window.console)\n                .apply(window.console, [Date.now() - logger.options.start + 'ms', 'html2canvas:'].concat([].slice.call(arguments, 0)));\n            }\n          };\n\n          logger.options = { logging: false };\n          module.exports = logger;\n        },\n        {}\n      ],\n      14: [\n        function(_dereq_, module, exports) {\n          var Color = _dereq_('./color');\n          var utils = _dereq_('./utils');\n          var getBounds = utils.getBounds;\n          var parseBackgrounds = utils.parseBackgrounds;\n          var offsetBounds = utils.offsetBounds;\n\n          function NodeContainer(node, parent) {\n            this.node = node;\n            this.parent = parent;\n            this.stack = null;\n            this.bounds = null;\n            this.borders = null;\n            this.clip = [];\n            this.backgroundClip = [];\n            this.offsetBounds = null;\n            this.visible = null;\n            this.computedStyles = null;\n            this.colors = {};\n            this.styles = {};\n            this.backgroundImages = null;\n            this.transformData = null;\n            this.transformMatrix = null;\n            this.isPseudoElement = false;\n            this.opacity = null;\n          }\n\n          NodeContainer.prototype.cloneTo = function(stack) {\n            stack.visible = this.visible;\n            stack.borders = this.borders;\n            stack.bounds = this.bounds;\n            stack.clip = this.clip;\n            stack.backgroundClip = this.backgroundClip;\n            stack.computedStyles = this.computedStyles;\n            stack.styles = this.styles;\n            stack.backgroundImages = this.backgroundImages;\n            stack.opacity = this.opacity;\n          };\n\n          NodeContainer.prototype.getOpacity = function() {\n            return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n          };\n\n          NodeContainer.prototype.assignStack = function(stack) {\n            this.stack = stack;\n            stack.children.push(this);\n          };\n\n          NodeContainer.prototype.isElementVisible = function() {\n            return this.node.nodeType === Node.TEXT_NODE\n              ? this.parent.visible\n              : this.css('display') !== 'none' &&\n                  this.css('visibility') !== 'hidden' &&\n                  !this.node.hasAttribute('data-html2canvas-ignore') &&\n                  (this.node.nodeName !== 'INPUT' || this.node.getAttribute('type') !== 'hidden');\n          };\n\n          NodeContainer.prototype.css = function(attribute) {\n            if (!this.computedStyles) {\n              this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? ':before' : ':after') : this.computedStyle(null);\n            }\n\n            return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n          };\n\n          NodeContainer.prototype.prefixedCss = function(attribute) {\n            var prefixes = ['webkit', 'moz', 'ms', 'o'];\n            var value = this.css(attribute);\n            if (value === undefined) {\n              prefixes.some(function(prefix) {\n                value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n                return value !== undefined;\n              }, this);\n            }\n            return value === undefined ? null : value;\n          };\n\n          NodeContainer.prototype.computedStyle = function(type) {\n            return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n          };\n\n          NodeContainer.prototype.cssInt = function(attribute) {\n            var value = parseInt(this.css(attribute), 10);\n            return isNaN(value) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n          };\n\n          NodeContainer.prototype.color = function(attribute) {\n            return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n          };\n\n          NodeContainer.prototype.cssFloat = function(attribute) {\n            var value = parseFloat(this.css(attribute));\n            return isNaN(value) ? 0 : value;\n          };\n\n          NodeContainer.prototype.fontWeight = function() {\n            var weight = this.css('fontWeight');\n            switch (parseInt(weight, 10)) {\n              case 401:\n                weight = 'bold';\n                break;\n              case 400:\n                weight = 'normal';\n                break;\n            }\n            return weight;\n          };\n\n          NodeContainer.prototype.parseClip = function() {\n            var matches = this.css('clip').match(this.CLIP);\n            if (matches) {\n              return {\n                top: parseInt(matches[1], 10),\n                right: parseInt(matches[2], 10),\n                bottom: parseInt(matches[3], 10),\n                left: parseInt(matches[4], 10)\n              };\n            }\n            return null;\n          };\n\n          NodeContainer.prototype.parseBackgroundImages = function() {\n            return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css('backgroundImage')));\n          };\n\n          NodeContainer.prototype.cssList = function(property, index) {\n            var value = (this.css(property) || '').split(',');\n            value = value[index || 0] || value[0] || 'auto';\n            value = value.trim().split(' ');\n            if (value.length === 1) {\n              value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\n            }\n            return value;\n          };\n\n          NodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n            var size = this.cssList('backgroundSize', index);\n            var width, height;\n\n            if (isPercentage(size[0])) {\n              width = (bounds.width * parseFloat(size[0])) / 100;\n            } else if (/contain|cover/.test(size[0])) {\n              var targetRatio = bounds.width / bounds.height,\n                currentRatio = image.width / image.height;\n              return (targetRatio < currentRatio) ^ (size[0] === 'contain')\n                ? { width: bounds.height * currentRatio, height: bounds.height }\n                : { width: bounds.width, height: bounds.width / currentRatio };\n            } else {\n              width = parseInt(size[0], 10);\n            }\n\n            if (size[0] === 'auto' && size[1] === 'auto') {\n              height = image.height;\n            } else if (size[1] === 'auto') {\n              height = (width / image.width) * image.height;\n            } else if (isPercentage(size[1])) {\n              height = (bounds.height * parseFloat(size[1])) / 100;\n            } else {\n              height = parseInt(size[1], 10);\n            }\n\n            if (size[0] === 'auto') {\n              width = (height / image.height) * image.width;\n            }\n\n            return { width: width, height: height };\n          };\n\n          NodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n            var position = this.cssList('backgroundPosition', index);\n            var left, top;\n\n            if (isPercentage(position[0])) {\n              left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n            } else {\n              left = parseInt(position[0], 10);\n            }\n\n            if (position[1] === 'auto') {\n              top = (left / image.width) * image.height;\n            } else if (isPercentage(position[1])) {\n              top = ((bounds.height - (backgroundSize || image).height) * parseFloat(position[1])) / 100;\n            } else {\n              top = parseInt(position[1], 10);\n            }\n\n            if (position[0] === 'auto') {\n              left = (top / image.height) * image.width;\n            }\n\n            return { left: left, top: top };\n          };\n\n          NodeContainer.prototype.parseBackgroundRepeat = function(index) {\n            return this.cssList('backgroundRepeat', index)[0];\n          };\n\n          NodeContainer.prototype.parseTextShadows = function() {\n            var textShadow = this.css('textShadow');\n            var results = [];\n\n            if (textShadow && textShadow !== 'none') {\n              var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n              for (var i = 0; shadows && i < shadows.length; i++) {\n                var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n                results.push({\n                  color: new Color(s[0]),\n                  offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                  offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                  blur: s[3] ? s[3].replace('px', '') : 0\n                });\n              }\n            }\n            return results;\n          };\n\n          NodeContainer.prototype.parseTransform = function() {\n            if (!this.transformData) {\n              if (this.hasTransform()) {\n                var offset = this.parseBounds();\n                var origin = this.prefixedCss('transformOrigin')\n                  .split(' ')\n                  .map(removePx)\n                  .map(asFloat);\n                origin[0] += offset.left;\n                origin[1] += offset.top;\n                this.transformData = {\n                  origin: origin,\n                  matrix: this.parseTransformMatrix()\n                };\n              } else {\n                this.transformData = {\n                  origin: [0, 0],\n                  matrix: [1, 0, 0, 1, 0, 0]\n                };\n              }\n            }\n            return this.transformData;\n          };\n\n          NodeContainer.prototype.parseTransformMatrix = function() {\n            if (!this.transformMatrix) {\n              var transform = this.prefixedCss('transform');\n              var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n              this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n            }\n            return this.transformMatrix;\n          };\n\n          NodeContainer.prototype.parseBounds = function() {\n            return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n          };\n\n          NodeContainer.prototype.hasTransform = function() {\n            return this.parseTransformMatrix().join(',') !== '1,0,0,1,0,0' || (this.parent && this.parent.hasTransform());\n          };\n\n          NodeContainer.prototype.getValue = function() {\n            var value = this.node.value || '';\n            if (this.node.tagName === 'SELECT') {\n              value = selectionValue(this.node);\n            } else if (this.node.type === 'password') {\n              value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n            }\n            return value.length === 0 ? this.node.placeholder || '' : value;\n          };\n\n          NodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\n          NodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\n          NodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\n          NodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\n          function selectionValue(node) {\n            var option = node.options[node.selectedIndex || 0];\n            return option ? option.text || '' : '';\n          }\n\n          function parseMatrix(match) {\n            if (match && match[1] === 'matrix') {\n              return match[2].split(',').map(function(s) {\n                return parseFloat(s.trim());\n              });\n            } else if (match && match[1] === 'matrix3d') {\n              var matrix3d = match[2].split(',').map(function(s) {\n                return parseFloat(s.trim());\n              });\n              return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\n            }\n          }\n\n          function isPercentage(value) {\n            return value.toString().indexOf('%') !== -1;\n          }\n\n          function removePx(str) {\n            return str.replace('px', '');\n          }\n\n          function asFloat(str) {\n            return parseFloat(str);\n          }\n\n          module.exports = NodeContainer;\n        },\n        { './color': 3, './utils': 26 }\n      ],\n      15: [\n        function(_dereq_, module, exports) {\n          var log = _dereq_('./log');\n          var punycode = _dereq_('punycode');\n          var NodeContainer = _dereq_('./nodecontainer');\n          var TextContainer = _dereq_('./textcontainer');\n          var PseudoElementContainer = _dereq_('./pseudoelementcontainer');\n          var FontMetrics = _dereq_('./fontmetrics');\n          var Color = _dereq_('./color');\n          var StackingContext = _dereq_('./stackingcontext');\n          var utils = _dereq_('./utils');\n          var bind = utils.bind;\n          var getBounds = utils.getBounds;\n          var parseBackgrounds = utils.parseBackgrounds;\n          var offsetBounds = utils.offsetBounds;\n\n          function NodeParser(element, renderer, support, imageLoader, options) {\n            log('Starting NodeParser');\n            this.renderer = renderer;\n            this.options = options;\n            this.range = null;\n            this.support = support;\n            this.renderQueue = [];\n            this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n            var parent = new NodeContainer(element, null);\n            if (options.background) {\n              renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n            }\n            if (element === element.ownerDocument.documentElement) {\n              // http://www.w3.org/TR/css3-background/#special-backgrounds\n              var canvasBackground = new NodeContainer(\n                parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement,\n                null\n              );\n              renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n            }\n            parent.visibile = parent.isElementVisible();\n            this.createPseudoHideStyles(element.ownerDocument);\n            this.disableAnimations(element.ownerDocument);\n            this.nodes = flatten(\n              [parent]\n                .concat(this.getChildren(parent))\n                .filter(function(container) {\n                  return (container.visible = container.isElementVisible());\n                })\n                .map(this.getPseudoElements, this)\n            );\n            this.fontMetrics = new FontMetrics();\n            log('Fetched nodes, total:', this.nodes.length);\n            log('Calculate overflow clips');\n            this.calculateOverflowClips();\n            log('Start fetching images');\n            this.images = imageLoader.fetch(this.nodes.filter(isElement));\n            this.ready = this.images.ready.then(\n              bind(function() {\n                log('Images loaded, starting parsing');\n                log('Creating stacking contexts');\n                this.createStackingContexts();\n                log('Sorting stacking contexts');\n                this.sortStackingContexts(this.stack);\n                this.parse(this.stack);\n                log('Render queue created with ' + this.renderQueue.length + ' items');\n                return new Promise(\n                  bind(function(resolve) {\n                    if (!options.async) {\n                      this.renderQueue.forEach(this.paint, this);\n                      resolve();\n                    } else if (typeof options.async === 'function') {\n                      options.async.call(this, this.renderQueue, resolve);\n                    } else if (this.renderQueue.length > 0) {\n                      this.renderIndex = 0;\n                      this.asyncRenderer(this.renderQueue, resolve);\n                    } else {\n                      resolve();\n                    }\n                  }, this)\n                );\n              }, this)\n            );\n          }\n\n          NodeParser.prototype.calculateOverflowClips = function() {\n            this.nodes.forEach(function(container) {\n              if (isElement(container)) {\n                if (isPseudoElement(container)) {\n                  container.appendToDOM();\n                }\n                container.borders = this.parseBorders(container);\n                var clip = container.css('overflow') === 'hidden' ? [container.borders.clip] : [];\n                var cssClip = container.parseClip();\n                if (cssClip && ['absolute', 'fixed'].indexOf(container.css('position')) !== -1) {\n                  clip.push([\n                    ['rect', container.bounds.left + cssClip.left, container.bounds.top + cssClip.top, cssClip.right - cssClip.left, cssClip.bottom - cssClip.top]\n                  ]);\n                }\n                container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n                container.backgroundClip = container.css('overflow') !== 'hidden' ? container.clip.concat([container.borders.clip]) : container.clip;\n                if (isPseudoElement(container)) {\n                  container.cleanDOM();\n                }\n              } else if (isTextNode(container)) {\n                container.clip = hasParentClip(container) ? container.parent.clip : [];\n              }\n              if (!isPseudoElement(container)) {\n                container.bounds = null;\n              }\n            }, this);\n          };\n\n          function hasParentClip(container) {\n            return container.parent && container.parent.clip.length;\n          }\n\n          NodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n            asyncTimer = asyncTimer || Date.now();\n            this.paint(queue[this.renderIndex++]);\n            if (queue.length === this.renderIndex) {\n              resolve();\n            } else if (asyncTimer + 20 > Date.now()) {\n              this.asyncRenderer(queue, resolve, asyncTimer);\n            } else {\n              setTimeout(\n                bind(function() {\n                  this.asyncRenderer(queue, resolve);\n                }, this),\n                0\n              );\n            }\n          };\n\n          NodeParser.prototype.createPseudoHideStyles = function(document) {\n            this.createStyles(\n              document,\n              '.' +\n                PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE +\n                ':before { content: \"\" !important; display: none !important; }' +\n                '.' +\n                PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER +\n                ':after { content: \"\" !important; display: none !important; }'\n            );\n          };\n\n          NodeParser.prototype.disableAnimations = function(document) {\n            this.createStyles(\n              document,\n              '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n                '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}'\n            );\n          };\n\n          NodeParser.prototype.createStyles = function(document, styles) {\n            var hidePseudoElements = document.createElement('style');\n            hidePseudoElements.innerHTML = styles;\n            document.body.appendChild(hidePseudoElements);\n          };\n\n          NodeParser.prototype.getPseudoElements = function(container) {\n            var nodes = [[container]];\n            if (container.node.nodeType === Node.ELEMENT_NODE) {\n              var before = this.getPseudoElement(container, ':before');\n              var after = this.getPseudoElement(container, ':after');\n\n              if (before) {\n                nodes.push(before);\n              }\n\n              if (after) {\n                nodes.push(after);\n              }\n            }\n            return flatten(nodes);\n          };\n\n          function toCamelCase(str) {\n            return str.replace(/(\\-[a-z])/g, function(match) {\n              return match.toUpperCase().replace('-', '');\n            });\n          }\n\n          NodeParser.prototype.getPseudoElement = function(container, type) {\n            var style = container.computedStyle(type);\n            if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\n              return null;\n            }\n\n            var content = stripQuotes(style.content);\n            var isImage = content.substr(0, 3) === 'url';\n            var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n            var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n            for (var i = style.length - 1; i >= 0; i--) {\n              var property = toCamelCase(style.item(i));\n              pseudoNode.style[property] = style[property];\n            }\n\n            pseudoNode.className =\n              PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n            if (isImage) {\n              pseudoNode.src = parseBackgrounds(content)[0].args[0];\n              return [pseudoContainer];\n            } else {\n              var text = document.createTextNode(content);\n              pseudoNode.appendChild(text);\n              return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n            }\n          };\n\n          NodeParser.prototype.getChildren = function(parentContainer) {\n            return flatten(\n              [].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n                var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(\n                  nonIgnoredElement\n                );\n                return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== 'TEXTAREA'\n                  ? container[0].isElementVisible()\n                    ? container.concat(this.getChildren(container[0]))\n                    : []\n                  : container;\n              }, this)\n            );\n          };\n\n          NodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n            var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n            container.cloneTo(stack);\n            var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n            parentStack.contexts.push(stack);\n            container.stack = stack;\n          };\n\n          NodeParser.prototype.createStackingContexts = function() {\n            this.nodes.forEach(function(container) {\n              if (\n                isElement(container) &&\n                (this.isRootElement(container) ||\n                  hasOpacity(container) ||\n                  isPositionedForStacking(container) ||\n                  this.isBodyWithTransparentRoot(container) ||\n                  container.hasTransform())\n              ) {\n                this.newStackingContext(container, true);\n              } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n                this.newStackingContext(container, false);\n              } else {\n                container.assignStack(container.parent.stack);\n              }\n            }, this);\n          };\n\n          NodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n            return container.node.nodeName === 'BODY' && container.parent.color('backgroundColor').isTransparent();\n          };\n\n          NodeParser.prototype.isRootElement = function(container) {\n            return container.parent === null;\n          };\n\n          NodeParser.prototype.sortStackingContexts = function(stack) {\n            stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n            stack.contexts.forEach(this.sortStackingContexts, this);\n          };\n\n          NodeParser.prototype.parseTextBounds = function(container) {\n            return function(text, index, textList) {\n              if (container.parent.css('textDecoration').substr(0, 4) !== 'none' || text.trim().length !== 0) {\n                if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                  var offset = textList.slice(0, index).join('').length;\n                  return this.getRangeBounds(container.node, offset, text.length);\n                } else if (container.node && typeof container.node.data === 'string') {\n                  var replacementNode = container.node.splitText(text.length);\n                  var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                  container.node = replacementNode;\n                  return bounds;\n                }\n              } else if (!this.support.rangeBounds || container.parent.hasTransform()) {\n                container.node = container.node.splitText(text.length);\n              }\n              return {};\n            };\n          };\n\n          NodeParser.prototype.getWrapperBounds = function(node, transform) {\n            var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n            var parent = node.parentNode,\n              backupText = node.cloneNode(true);\n\n            wrapper.appendChild(node.cloneNode(true));\n            parent.replaceChild(wrapper, node);\n            var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n            parent.replaceChild(backupText, wrapper);\n            return bounds;\n          };\n\n          NodeParser.prototype.getRangeBounds = function(node, offset, length) {\n            var range = this.range || (this.range = node.ownerDocument.createRange());\n            range.setStart(node, offset);\n            range.setEnd(node, offset + length);\n            return range.getBoundingClientRect();\n          };\n\n          function ClearTransform() {}\n\n          NodeParser.prototype.parse = function(stack) {\n            // http://www.w3.org/TR/CSS21/visuren.html#z-index\n            var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n            var descendantElements = stack.children.filter(isElement);\n            var descendantNonFloats = descendantElements.filter(not(isFloating));\n            var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n            var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n            var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n            var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n            var text = stack.children.filter(isTextNode).filter(hasText);\n            var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n            negativeZindex\n              .concat(nonInlineNonPositionedDescendants)\n              .concat(nonPositionedFloats)\n              .concat(inFlow)\n              .concat(stackLevel0)\n              .concat(text)\n              .concat(positiveZindex)\n              .forEach(function(container) {\n                this.renderQueue.push(container);\n                if (isStackingContext(container)) {\n                  this.parse(container);\n                  this.renderQueue.push(new ClearTransform());\n                }\n              }, this);\n          };\n\n          NodeParser.prototype.paint = function(container) {\n            try {\n              if (container instanceof ClearTransform) {\n                this.renderer.ctx.restore();\n              } else if (isTextNode(container)) {\n                if (isPseudoElement(container.parent)) {\n                  container.parent.appendToDOM();\n                }\n                this.paintText(container);\n                if (isPseudoElement(container.parent)) {\n                  container.parent.cleanDOM();\n                }\n              } else {\n                this.paintNode(container);\n              }\n            } catch (e) {\n              log(e);\n              if (this.options.strict) {\n                throw e;\n              }\n            }\n          };\n\n          NodeParser.prototype.paintNode = function(container) {\n            if (isStackingContext(container)) {\n              this.renderer.setOpacity(container.opacity);\n              this.renderer.ctx.save();\n              if (container.hasTransform()) {\n                this.renderer.setTransform(container.parseTransform());\n              }\n            }\n\n            if (container.node.nodeName === 'INPUT' && container.node.type === 'checkbox') {\n              this.paintCheckbox(container);\n            } else if (container.node.nodeName === 'INPUT' && container.node.type === 'radio') {\n              this.paintRadio(container);\n            } else {\n              this.paintElement(container);\n            }\n          };\n\n          NodeParser.prototype.paintElement = function(container) {\n            var bounds = container.parseBounds();\n            this.renderer.clip(\n              container.backgroundClip,\n              function() {\n                this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n              },\n              this\n            );\n\n            this.renderer.clip(\n              container.clip,\n              function() {\n                this.renderer.renderBorders(container.borders.borders);\n              },\n              this\n            );\n\n            this.renderer.clip(\n              container.backgroundClip,\n              function() {\n                switch (container.node.nodeName) {\n                  case 'svg':\n                  case 'IFRAME':\n                    var imgContainer = this.images.get(container.node);\n                    if (imgContainer) {\n                      this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n                    } else {\n                      log('Error loading <' + container.node.nodeName + '>', container.node);\n                    }\n                    break;\n                  case 'IMG':\n                    var imageContainer = this.images.get(container.node.src);\n                    if (imageContainer) {\n                      this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n                    } else {\n                      log('Error loading <img>', container.node.src);\n                    }\n                    break;\n                  case 'CANVAS':\n                    this.renderer.renderImage(container, bounds, container.borders, { image: container.node });\n                    break;\n                  case 'SELECT':\n                  case 'INPUT':\n                  case 'TEXTAREA':\n                    this.paintFormValue(container);\n                    break;\n                }\n              },\n              this\n            );\n          };\n\n          NodeParser.prototype.paintCheckbox = function(container) {\n            var b = container.parseBounds();\n\n            var size = Math.min(b.width, b.height);\n            var bounds = { width: size - 1, height: size - 1, top: b.top, left: b.left };\n            var r = [3, 3];\n            var radius = [r, r, r, r];\n            var borders = [1, 1, 1, 1].map(function(w) {\n              return { color: new Color('#A5A5A5'), width: w };\n            });\n\n            var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n            this.renderer.clip(\n              container.backgroundClip,\n              function() {\n                this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color('#DEDEDE'));\n                this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n                if (container.node.checked) {\n                  this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', size - 3 + 'px', 'arial');\n                  this.renderer.text('\\u2714', bounds.left + size / 6, bounds.top + size - 1);\n                }\n              },\n              this\n            );\n          };\n\n          NodeParser.prototype.paintRadio = function(container) {\n            var bounds = container.parseBounds();\n\n            var size = Math.min(bounds.width, bounds.height) - 2;\n\n            this.renderer.clip(\n              container.backgroundClip,\n              function() {\n                this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n                if (container.node.checked) {\n                  this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n                }\n              },\n              this\n            );\n          };\n\n          NodeParser.prototype.paintFormValue = function(container) {\n            var value = container.getValue();\n            if (value.length > 0) {\n              var document = container.node.ownerDocument;\n              var wrapper = document.createElement('html2canvaswrapper');\n              var properties = [\n                'lineHeight',\n                'textAlign',\n                'fontFamily',\n                'fontWeight',\n                'fontSize',\n                'color',\n                'paddingLeft',\n                'paddingTop',\n                'paddingRight',\n                'paddingBottom',\n                'width',\n                'height',\n                'borderLeftStyle',\n                'borderTopStyle',\n                'borderLeftWidth',\n                'borderTopWidth',\n                'boxSizing',\n                'whiteSpace',\n                'wordWrap'\n              ];\n\n              properties.forEach(function(property) {\n                try {\n                  wrapper.style[property] = container.css(property);\n                } catch (e) {\n                  // Older IE has issues with \"border\"\n                  log('html2canvas: Parse: Exception caught in renderFormValue: ' + e.message);\n                }\n              });\n              var bounds = container.parseBounds();\n              wrapper.style.position = 'fixed';\n              wrapper.style.left = bounds.left + 'px';\n              wrapper.style.top = bounds.top + 'px';\n              wrapper.textContent = value;\n              document.body.appendChild(wrapper);\n              this.paintText(new TextContainer(wrapper.firstChild, container));\n              document.body.removeChild(wrapper);\n            }\n          };\n\n          NodeParser.prototype.paintText = function(container) {\n            container.applyTextTransform();\n            var characters = punycode.ucs2.decode(container.node.data);\n            var textList =\n              (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data)\n                ? getWords(characters)\n                : characters.map(function(character) {\n                    return punycode.ucs2.encode([character]);\n                  });\n\n            var weight = container.parent.fontWeight();\n            var size = container.parent.css('fontSize');\n            var family = container.parent.css('fontFamily');\n            var shadows = container.parent.parseTextShadows();\n\n            this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n            if (shadows.length) {\n              // TODO: support multiple text shadows\n              this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n            } else {\n              this.renderer.clearShadow();\n            }\n\n            this.renderer.clip(\n              container.parent.clip,\n              function() {\n                textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n                  if (bounds) {\n                    this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                    this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n                  }\n                }, this);\n              },\n              this\n            );\n          };\n\n          NodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n            switch (container.css('textDecoration').split(' ')[0]) {\n              case 'underline':\n                // Draws a line at the baseline of the font\n                // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n                this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color('color'));\n                break;\n              case 'overline':\n                this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color('color'));\n                break;\n              case 'line-through':\n                // TODO try and find exact position for line-through\n                this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color('color'));\n                break;\n            }\n          };\n\n          var borderColorTransforms = {\n            inset: [\n              ['darken', 0.6],\n              ['darken', 0.1],\n              ['darken', 0.1],\n              ['darken', 0.6]\n            ]\n          };\n\n          NodeParser.prototype.parseBorders = function(container) {\n            var nodeBounds = container.parseBounds();\n            var radius = getBorderRadiusData(container);\n            var borders = ['Top', 'Right', 'Bottom', 'Left'].map(function(side, index) {\n              var style = container.css('border' + side + 'Style');\n              var color = container.color('border' + side + 'Color');\n              if (style === 'inset' && color.isBlack()) {\n                color = new Color([255, 255, 255, color.a]); // this is wrong, but\n              }\n              var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n              return {\n                width: container.cssInt('border' + side + 'Width'),\n                color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n                args: null\n              };\n            });\n            var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n            return {\n              clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n              borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n            };\n          };\n\n          function calculateBorders(borders, nodeBounds, borderPoints, radius) {\n            return borders.map(function(border, borderSide) {\n              if (border.width > 0) {\n                var bx = nodeBounds.left;\n                var by = nodeBounds.top;\n                var bw = nodeBounds.width;\n                var bh = nodeBounds.height - borders[2].width;\n\n                switch (borderSide) {\n                  case 0:\n                    // top border\n                    bh = borders[0].width;\n                    border.args = drawSide(\n                      {\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                      },\n                      radius[0],\n                      radius[1],\n                      borderPoints.topLeftOuter,\n                      borderPoints.topLeftInner,\n                      borderPoints.topRightOuter,\n                      borderPoints.topRightInner\n                    );\n                    break;\n                  case 1:\n                    // right border\n                    bx = nodeBounds.left + nodeBounds.width - borders[1].width;\n                    bw = borders[1].width;\n\n                    border.args = drawSide(\n                      {\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                      },\n                      radius[1],\n                      radius[2],\n                      borderPoints.topRightOuter,\n                      borderPoints.topRightInner,\n                      borderPoints.bottomRightOuter,\n                      borderPoints.bottomRightInner\n                    );\n                    break;\n                  case 2:\n                    // bottom border\n                    by = by + nodeBounds.height - borders[2].width;\n                    bh = borders[2].width;\n                    border.args = drawSide(\n                      {\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                      },\n                      radius[2],\n                      radius[3],\n                      borderPoints.bottomRightOuter,\n                      borderPoints.bottomRightInner,\n                      borderPoints.bottomLeftOuter,\n                      borderPoints.bottomLeftInner\n                    );\n                    break;\n                  case 3:\n                    // left border\n                    bw = borders[3].width;\n                    border.args = drawSide(\n                      {\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                      },\n                      radius[3],\n                      radius[0],\n                      borderPoints.bottomLeftOuter,\n                      borderPoints.bottomLeftInner,\n                      borderPoints.topLeftOuter,\n                      borderPoints.topLeftInner\n                    );\n                    break;\n                }\n              }\n              return border;\n            });\n          }\n\n          NodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n            var backgroundClip = container.css('backgroundClip'),\n              borderArgs = [];\n\n            switch (backgroundClip) {\n              case 'content-box':\n              case 'padding-box':\n                parseCorner(\n                  borderArgs,\n                  radius[0],\n                  radius[1],\n                  borderPoints.topLeftInner,\n                  borderPoints.topRightInner,\n                  bounds.left + borders[3].width,\n                  bounds.top + borders[0].width\n                );\n                parseCorner(\n                  borderArgs,\n                  radius[1],\n                  radius[2],\n                  borderPoints.topRightInner,\n                  borderPoints.bottomRightInner,\n                  bounds.left + bounds.width - borders[1].width,\n                  bounds.top + borders[0].width\n                );\n                parseCorner(\n                  borderArgs,\n                  radius[2],\n                  radius[3],\n                  borderPoints.bottomRightInner,\n                  borderPoints.bottomLeftInner,\n                  bounds.left + bounds.width - borders[1].width,\n                  bounds.top + bounds.height - borders[2].width\n                );\n                parseCorner(\n                  borderArgs,\n                  radius[3],\n                  radius[0],\n                  borderPoints.bottomLeftInner,\n                  borderPoints.topLeftInner,\n                  bounds.left + borders[3].width,\n                  bounds.top + bounds.height - borders[2].width\n                );\n                break;\n\n              default:\n                parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n                parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n                parseCorner(\n                  borderArgs,\n                  radius[2],\n                  radius[3],\n                  borderPoints.bottomRightOuter,\n                  borderPoints.bottomLeftOuter,\n                  bounds.left + bounds.width,\n                  bounds.top + bounds.height\n                );\n                parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n                break;\n            }\n\n            return borderArgs;\n          };\n\n          function getCurvePoints(x, y, r1, r2) {\n            var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n            var ox = r1 * kappa, // control point offset horizontal\n              oy = r2 * kappa, // control point offset vertical\n              xm = x + r1, // x-middle\n              ym = y + r2; // y-middle\n            return {\n              topLeft: bezierCurve({ x: x, y: ym }, { x: x, y: ym - oy }, { x: xm - ox, y: y }, { x: xm, y: y }),\n              topRight: bezierCurve({ x: x, y: y }, { x: x + ox, y: y }, { x: xm, y: ym - oy }, { x: xm, y: ym }),\n              bottomRight: bezierCurve({ x: xm, y: y }, { x: xm, y: y + oy }, { x: x + ox, y: ym }, { x: x, y: ym }),\n              bottomLeft: bezierCurve({ x: xm, y: ym }, { x: xm - ox, y: ym }, { x: x, y: y + oy }, { x: x, y: y })\n            };\n          }\n\n          function calculateCurvePoints(bounds, borderRadius, borders) {\n            var x = bounds.left,\n              y = bounds.top,\n              width = bounds.width,\n              height = bounds.height,\n              tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\n              tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\n              trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\n              trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\n              brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\n              brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\n              blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\n              blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\n\n            var topWidth = width - trh,\n              rightHeight = height - brv,\n              bottomWidth = width - brh,\n              leftHeight = height - blv;\n\n            return {\n              topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n              topLeftInner: getCurvePoints(\n                x + borders[3].width,\n                y + borders[0].width,\n                Math.max(0, tlh - borders[3].width),\n                Math.max(0, tlv - borders[0].width)\n              ).topLeft.subdivide(0.5),\n              topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n              topRightInner: getCurvePoints(\n                x + Math.min(topWidth, width + borders[3].width),\n                y + borders[0].width,\n                topWidth > width + borders[3].width ? 0 : trh - borders[3].width,\n                trv - borders[0].width\n              ).topRight.subdivide(0.5),\n              bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n              bottomRightInner: getCurvePoints(\n                x + Math.min(bottomWidth, width - borders[3].width),\n                y + Math.min(rightHeight, height + borders[0].width),\n                Math.max(0, brh - borders[1].width),\n                brv - borders[2].width\n              ).bottomRight.subdivide(0.5),\n              bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n              bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n            };\n          }\n\n          function bezierCurve(start, startControl, endControl, end) {\n            var lerp = function(a, b, t) {\n              return {\n                x: a.x + (b.x - a.x) * t,\n                y: a.y + (b.y - a.y) * t\n              };\n            };\n\n            return {\n              start: start,\n              startControl: startControl,\n              endControl: endControl,\n              end: end,\n              subdivide: function(t) {\n                var ab = lerp(start, startControl, t),\n                  bc = lerp(startControl, endControl, t),\n                  cd = lerp(endControl, end, t),\n                  abbc = lerp(ab, bc, t),\n                  bccd = lerp(bc, cd, t),\n                  dest = lerp(abbc, bccd, t);\n                return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n              },\n              curveTo: function(borderArgs) {\n                borderArgs.push(['bezierCurve', startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n              },\n              curveToReversed: function(borderArgs) {\n                borderArgs.push(['bezierCurve', endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n              }\n            };\n          }\n\n          function drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n            var borderArgs = [];\n\n            if (radius1[0] > 0 || radius1[1] > 0) {\n              borderArgs.push(['line', outer1[1].start.x, outer1[1].start.y]);\n              outer1[1].curveTo(borderArgs);\n            } else {\n              borderArgs.push(['line', borderData.c1[0], borderData.c1[1]]);\n            }\n\n            if (radius2[0] > 0 || radius2[1] > 0) {\n              borderArgs.push(['line', outer2[0].start.x, outer2[0].start.y]);\n              outer2[0].curveTo(borderArgs);\n              borderArgs.push(['line', inner2[0].end.x, inner2[0].end.y]);\n              inner2[0].curveToReversed(borderArgs);\n            } else {\n              borderArgs.push(['line', borderData.c2[0], borderData.c2[1]]);\n              borderArgs.push(['line', borderData.c3[0], borderData.c3[1]]);\n            }\n\n            if (radius1[0] > 0 || radius1[1] > 0) {\n              borderArgs.push(['line', inner1[1].end.x, inner1[1].end.y]);\n              inner1[1].curveToReversed(borderArgs);\n            } else {\n              borderArgs.push(['line', borderData.c4[0], borderData.c4[1]]);\n            }\n\n            return borderArgs;\n          }\n\n          function parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n            if (radius1[0] > 0 || radius1[1] > 0) {\n              borderArgs.push(['line', corner1[0].start.x, corner1[0].start.y]);\n              corner1[0].curveTo(borderArgs);\n              corner1[1].curveTo(borderArgs);\n            } else {\n              borderArgs.push(['line', x, y]);\n            }\n\n            if (radius2[0] > 0 || radius2[1] > 0) {\n              borderArgs.push(['line', corner2[0].start.x, corner2[0].start.y]);\n            }\n          }\n\n          function negativeZIndex(container) {\n            return container.cssInt('zIndex') < 0;\n          }\n\n          function positiveZIndex(container) {\n            return container.cssInt('zIndex') > 0;\n          }\n\n          function zIndex0(container) {\n            return container.cssInt('zIndex') === 0;\n          }\n\n          function inlineLevel(container) {\n            return ['inline', 'inline-block', 'inline-table'].indexOf(container.css('display')) !== -1;\n          }\n\n          function isStackingContext(container) {\n            return container instanceof StackingContext;\n          }\n\n          function hasText(container) {\n            return container.node.data.trim().length > 0;\n          }\n\n          function noLetterSpacing(container) {\n            return /^(normal|none|0px)$/.test(container.parent.css('letterSpacing'));\n          }\n\n          function getBorderRadiusData(container) {\n            return ['TopLeft', 'TopRight', 'BottomRight', 'BottomLeft'].map(function(side) {\n              var value = container.css('border' + side + 'Radius');\n              var arr = value.split(' ');\n              if (arr.length <= 1) {\n                arr[1] = arr[0];\n              }\n              return arr.map(asInt);\n            });\n          }\n\n          function renderableNode(node) {\n            return node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE;\n          }\n\n          function isPositionedForStacking(container) {\n            var position = container.css('position');\n            var zIndex = ['absolute', 'relative', 'fixed'].indexOf(position) !== -1 ? container.css('zIndex') : 'auto';\n            return zIndex !== 'auto';\n          }\n\n          function isPositioned(container) {\n            return container.css('position') !== 'static';\n          }\n\n          function isFloating(container) {\n            return container.css('float') !== 'none';\n          }\n\n          function isInlineBlock(container) {\n            return ['inline-block', 'inline-table'].indexOf(container.css('display')) !== -1;\n          }\n\n          function not(callback) {\n            var context = this;\n            return function() {\n              return !callback.apply(context, arguments);\n            };\n          }\n\n          function isElement(container) {\n            return container.node.nodeType === Node.ELEMENT_NODE;\n          }\n\n          function isPseudoElement(container) {\n            return container.isPseudoElement === true;\n          }\n\n          function isTextNode(container) {\n            return container.node.nodeType === Node.TEXT_NODE;\n          }\n\n          function zIndexSort(contexts) {\n            return function(a, b) {\n              return a.cssInt('zIndex') + contexts.indexOf(a) / contexts.length - (b.cssInt('zIndex') + contexts.indexOf(b) / contexts.length);\n            };\n          }\n\n          function hasOpacity(container) {\n            return container.getOpacity() < 1;\n          }\n\n          function asInt(value) {\n            return parseInt(value, 10);\n          }\n\n          function getWidth(border) {\n            return border.width;\n          }\n\n          function nonIgnoredElement(nodeContainer) {\n            return nodeContainer.node.nodeType !== Node.ELEMENT_NODE || ['SCRIPT', 'HEAD', 'TITLE', 'OBJECT', 'BR', 'OPTION'].indexOf(nodeContainer.node.nodeName) === -1;\n          }\n\n          function flatten(arrays) {\n            return [].concat.apply([], arrays);\n          }\n\n          function stripQuotes(content) {\n            var first = content.substr(0, 1);\n            return first === content.substr(content.length - 1) && first.match(/'|\"/) ? content.substr(1, content.length - 2) : content;\n          }\n\n          function getWords(characters) {\n            var words = [],\n              i = 0,\n              onWordBoundary = false,\n              word;\n            while (characters.length) {\n              if (isWordBoundary(characters[i]) === onWordBoundary) {\n                word = characters.splice(0, i);\n                if (word.length) {\n                  words.push(punycode.ucs2.encode(word));\n                }\n                onWordBoundary = !onWordBoundary;\n                i = 0;\n              } else {\n                i++;\n              }\n\n              if (i >= characters.length) {\n                word = characters.splice(0, i);\n                if (word.length) {\n                  words.push(punycode.ucs2.encode(word));\n                }\n              }\n            }\n            return words;\n          }\n\n          function isWordBoundary(characterCode) {\n            return (\n              [\n                32, // <space>\n                13, // \\r\n                10, // \\n\n                9, // \\t\n                45 // -\n              ].indexOf(characterCode) !== -1\n            );\n          }\n\n          function hasUnicode(string) {\n            return /[^\\u0000-\\u00ff]/.test(string);\n          }\n\n          module.exports = NodeParser;\n        },\n        {\n          './color': 3,\n          './fontmetrics': 7,\n          './log': 13,\n          './nodecontainer': 14,\n          './pseudoelementcontainer': 18,\n          './stackingcontext': 21,\n          './textcontainer': 25,\n          './utils': 26,\n          punycode: 1\n        }\n      ],\n      16: [\n        function(_dereq_, module, exports) {\n          var XHR = _dereq_('./xhr');\n          var utils = _dereq_('./utils');\n          var log = _dereq_('./log');\n          var createWindowClone = _dereq_('./clone');\n          var decode64 = utils.decode64;\n\n          function Proxy(src, proxyUrl, document) {\n            var supportsCORS = 'withCredentials' in new XMLHttpRequest();\n            if (!proxyUrl) {\n              return Promise.reject('No proxy configured');\n            }\n            var callback = createCallback(supportsCORS);\n            var url = createProxyUrl(proxyUrl, src, callback);\n\n            return supportsCORS\n              ? XHR(url)\n              : jsonp(document, url, callback).then(function(response) {\n                  return decode64(response.content);\n                });\n          }\n          var proxyCount = 0;\n\n          function ProxyURL(src, proxyUrl, document) {\n            var supportsCORSImage = 'crossOrigin' in new Image();\n            var callback = createCallback(supportsCORSImage);\n            var url = createProxyUrl(proxyUrl, src, callback);\n            return supportsCORSImage\n              ? Promise.resolve(url)\n              : jsonp(document, url, callback).then(function(response) {\n                  return 'data:' + response.type + ';base64,' + response.content;\n                });\n          }\n\n          function jsonp(document, url, callback) {\n            return new Promise(function(resolve, reject) {\n              var s = document.createElement('script');\n              var cleanup = function() {\n                delete window.html2canvas.proxy[callback];\n                document.body.removeChild(s);\n              };\n              window.html2canvas.proxy[callback] = function(response) {\n                cleanup();\n                resolve(response);\n              };\n              s.src = url;\n              s.onerror = function(e) {\n                cleanup();\n                reject(e);\n              };\n              document.body.appendChild(s);\n            });\n          }\n\n          function createCallback(useCORS) {\n            return !useCORS ? 'html2canvas_' + Date.now() + '_' + ++proxyCount + '_' + Math.round(Math.random() * 100000) : '';\n          }\n\n          function createProxyUrl(proxyUrl, src, callback) {\n            return proxyUrl + '?url=' + encodeURIComponent(src) + (callback.length ? '&callback=html2canvas.proxy.' + callback : '');\n          }\n\n          function documentFromHTML(src) {\n            return function(html) {\n              var parser = new DOMParser(),\n                doc;\n              try {\n                doc = parser.parseFromString(html, 'text/html');\n              } catch (e) {\n                log('DOMParser not supported, falling back to createHTMLDocument');\n                doc = document.implementation.createHTMLDocument('');\n                try {\n                  doc.open();\n                  doc.write(html);\n                  doc.close();\n                } catch (ee) {\n                  log('createHTMLDocument write not supported, falling back to document.body.innerHTML');\n                  doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n                }\n              }\n\n              var b = doc.querySelector('base');\n              if (!b || !b.href.host) {\n                var base = doc.createElement('base');\n                base.href = src;\n                doc.head.insertBefore(base, doc.head.firstChild);\n              }\n\n              return doc;\n            };\n          }\n\n          function loadUrlDocument(src, proxy, document, width, height, options) {\n            return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n              return createWindowClone(doc, document, width, height, options, 0, 0);\n            });\n          }\n\n          exports.Proxy = Proxy;\n          exports.ProxyURL = ProxyURL;\n          exports.loadUrlDocument = loadUrlDocument;\n        },\n        { './clone': 2, './log': 13, './utils': 26, './xhr': 28 }\n      ],\n      17: [\n        function(_dereq_, module, exports) {\n          var ProxyURL = _dereq_('./proxy').ProxyURL;\n\n          function ProxyImageContainer(src, proxy) {\n            var link = document.createElement('a');\n            link.href = src;\n            src = link.href;\n            this.src = src;\n            this.image = new Image();\n            var self = this;\n            this.promise = new Promise(function(resolve, reject) {\n              self.image.crossOrigin = 'Anonymous';\n              self.image.onload = resolve;\n              self.image.onerror = reject;\n\n              new ProxyURL(src, proxy, document)\n                .then(function(url) {\n                  self.image.src = url;\n                })\n                ['catch'](reject);\n            });\n          }\n\n          module.exports = ProxyImageContainer;\n        },\n        { './proxy': 16 }\n      ],\n      18: [\n        function(_dereq_, module, exports) {\n          var NodeContainer = _dereq_('./nodecontainer');\n\n          function PseudoElementContainer(node, parent, type) {\n            NodeContainer.call(this, node, parent);\n            this.isPseudoElement = true;\n            this.before = type === ':before';\n          }\n\n          PseudoElementContainer.prototype.cloneTo = function(stack) {\n            PseudoElementContainer.prototype.cloneTo.call(this, stack);\n            stack.isPseudoElement = true;\n            stack.before = this.before;\n          };\n\n          PseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\n          PseudoElementContainer.prototype.appendToDOM = function() {\n            if (this.before) {\n              this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n            } else {\n              this.parent.node.appendChild(this.node);\n            }\n            this.parent.node.className += ' ' + this.getHideClass();\n          };\n\n          PseudoElementContainer.prototype.cleanDOM = function() {\n            this.node.parentNode.removeChild(this.node);\n            this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), '');\n          };\n\n          PseudoElementContainer.prototype.getHideClass = function() {\n            return this['PSEUDO_HIDE_ELEMENT_CLASS_' + (this.before ? 'BEFORE' : 'AFTER')];\n          };\n\n          PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\n          PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\n\n          module.exports = PseudoElementContainer;\n        },\n        { './nodecontainer': 14 }\n      ],\n      19: [\n        function(_dereq_, module, exports) {\n          var log = _dereq_('./log');\n\n          function Renderer(width, height, images, options, document) {\n            this.width = width;\n            this.height = height;\n            this.images = images;\n            this.options = options;\n            this.document = document;\n          }\n\n          Renderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n            var paddingLeft = container.cssInt('paddingLeft'),\n              paddingTop = container.cssInt('paddingTop'),\n              paddingRight = container.cssInt('paddingRight'),\n              paddingBottom = container.cssInt('paddingBottom'),\n              borders = borderData.borders;\n\n            var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n            var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n            this.drawImage(\n              imageContainer,\n              0,\n              0,\n              imageContainer.image.width || width,\n              imageContainer.image.height || height,\n              bounds.left + paddingLeft + borders[3].width,\n              bounds.top + paddingTop + borders[0].width,\n              width,\n              height\n            );\n          };\n\n          Renderer.prototype.renderBackground = function(container, bounds, borderData) {\n            if (bounds.height > 0 && bounds.width > 0) {\n              this.renderBackgroundColor(container, bounds);\n              this.renderBackgroundImage(container, bounds, borderData);\n            }\n          };\n\n          Renderer.prototype.renderBackgroundColor = function(container, bounds) {\n            var color = container.color('backgroundColor');\n            if (!color.isTransparent()) {\n              this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n            }\n          };\n\n          Renderer.prototype.renderBorders = function(borders) {\n            borders.forEach(this.renderBorder, this);\n          };\n\n          Renderer.prototype.renderBorder = function(data) {\n            if (!data.color.isTransparent() && data.args !== null) {\n              this.drawShape(data.args, data.color);\n            }\n          };\n\n          Renderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n            var backgroundImages = container.parseBackgroundImages();\n            backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n              switch (backgroundImage.method) {\n                case 'url':\n                  var image = this.images.get(backgroundImage.args[0]);\n                  if (image) {\n                    this.renderBackgroundRepeating(container, bounds, image, arr.length - (index + 1), borderData);\n                  } else {\n                    log('Error loading background-image', backgroundImage.args[0]);\n                  }\n                  break;\n                case 'linear-gradient':\n                case 'gradient':\n                  var gradientImage = this.images.get(backgroundImage.value);\n                  if (gradientImage) {\n                    this.renderBackgroundGradient(gradientImage, bounds, borderData);\n                  } else {\n                    log('Error loading background-image', backgroundImage.args[0]);\n                  }\n                  break;\n                case 'none':\n                  break;\n                default:\n                  log('Unknown background-image type', backgroundImage.args[0]);\n              }\n            }, this);\n          };\n\n          Renderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n            var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n            var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n            var repeat = container.parseBackgroundRepeat(index);\n            switch (repeat) {\n              case 'repeat-x':\n              case 'repeat no-repeat':\n                this.backgroundRepeatShape(\n                  imageContainer,\n                  position,\n                  size,\n                  bounds,\n                  bounds.left + borderData[3],\n                  bounds.top + position.top + borderData[0],\n                  99999,\n                  size.height,\n                  borderData\n                );\n                break;\n              case 'repeat-y':\n              case 'no-repeat repeat':\n                this.backgroundRepeatShape(\n                  imageContainer,\n                  position,\n                  size,\n                  bounds,\n                  bounds.left + position.left + borderData[3],\n                  bounds.top + borderData[0],\n                  size.width,\n                  99999,\n                  borderData\n                );\n                break;\n              case 'no-repeat':\n                this.backgroundRepeatShape(\n                  imageContainer,\n                  position,\n                  size,\n                  bounds,\n                  bounds.left + position.left + borderData[3],\n                  bounds.top + position.top + borderData[0],\n                  size.width,\n                  size.height,\n                  borderData\n                );\n                break;\n              default:\n                this.renderBackgroundRepeat(imageContainer, position, size, { top: bounds.top, left: bounds.left }, borderData[3], borderData[0]);\n                break;\n            }\n          };\n\n          module.exports = Renderer;\n        },\n        { './log': 13 }\n      ],\n      20: [\n        function(_dereq_, module, exports) {\n          var Renderer = _dereq_('../renderer');\n          var LinearGradientContainer = _dereq_('../lineargradientcontainer');\n          var log = _dereq_('../log');\n\n          function CanvasRenderer(width, height) {\n            Renderer.apply(this, arguments);\n            this.canvas = this.options.canvas || this.document.createElement('canvas');\n            if (!this.options.canvas) {\n              this.canvas.width = width;\n              this.canvas.height = height;\n            }\n            this.ctx = this.canvas.getContext('2d');\n            this.taintCtx = this.document.createElement('canvas').getContext('2d');\n            this.ctx.textBaseline = 'bottom';\n            this.variables = {};\n            log('Initialized CanvasRenderer with size', width, 'x', height);\n          }\n\n          CanvasRenderer.prototype = Object.create(Renderer.prototype);\n\n          CanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n            this.ctx.fillStyle = typeof fillStyle === 'object' && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n            return this.ctx;\n          };\n\n          CanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n            this.setFillStyle(color).fillRect(left, top, width, height);\n          };\n\n          CanvasRenderer.prototype.circle = function(left, top, size, color) {\n            this.setFillStyle(color);\n            this.ctx.beginPath();\n            this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI * 2, true);\n            this.ctx.closePath();\n            this.ctx.fill();\n          };\n\n          CanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n            this.circle(left, top, size, color);\n            this.ctx.strokeStyle = strokeColor.toString();\n            this.ctx.stroke();\n          };\n\n          CanvasRenderer.prototype.drawShape = function(shape, color) {\n            this.shape(shape);\n            this.setFillStyle(color).fill();\n          };\n\n          CanvasRenderer.prototype.taints = function(imageContainer) {\n            if (imageContainer.tainted === null) {\n              this.taintCtx.drawImage(imageContainer.image, 0, 0);\n              try {\n                this.taintCtx.getImageData(0, 0, 1, 1);\n                imageContainer.tainted = false;\n              } catch (e) {\n                this.taintCtx = document.createElement('canvas').getContext('2d');\n                imageContainer.tainted = true;\n              }\n            }\n\n            return imageContainer.tainted;\n          };\n\n          CanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n            if (!this.taints(imageContainer) || this.options.allowTaint) {\n              this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n            }\n          };\n\n          CanvasRenderer.prototype.clip = function(shapes, callback, context) {\n            this.ctx.save();\n            shapes.filter(hasEntries).forEach(function(shape) {\n              this.shape(shape).clip();\n            }, this);\n            callback.call(context);\n            this.ctx.restore();\n          };\n\n          CanvasRenderer.prototype.shape = function(shape) {\n            this.ctx.beginPath();\n            shape.forEach(function(point, index) {\n              if (point[0] === 'rect') {\n                this.ctx.rect.apply(this.ctx, point.slice(1));\n              } else {\n                this.ctx[index === 0 ? 'moveTo' : point[0] + 'To'].apply(this.ctx, point.slice(1));\n              }\n            }, this);\n            this.ctx.closePath();\n            return this.ctx;\n          };\n\n          CanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n            this.setFillStyle(color).font = [style, variant, weight, size, family].join(' ').split(',')[0];\n          };\n\n          CanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n            this.setVariable('shadowColor', color.toString())\n              .setVariable('shadowOffsetY', offsetX)\n              .setVariable('shadowOffsetX', offsetY)\n              .setVariable('shadowBlur', blur);\n          };\n\n          CanvasRenderer.prototype.clearShadow = function() {\n            this.setVariable('shadowColor', 'rgba(0,0,0,0)');\n          };\n\n          CanvasRenderer.prototype.setOpacity = function(opacity) {\n            this.ctx.globalAlpha = opacity;\n          };\n\n          CanvasRenderer.prototype.setTransform = function(transform) {\n            this.ctx.translate(transform.origin[0], transform.origin[1]);\n            this.ctx.transform.apply(this.ctx, transform.matrix);\n            this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n          };\n\n          CanvasRenderer.prototype.setVariable = function(property, value) {\n            if (this.variables[property] !== value) {\n              this.variables[property] = this.ctx[property] = value;\n            }\n\n            return this;\n          };\n\n          CanvasRenderer.prototype.text = function(text, left, bottom) {\n            this.ctx.fillText(text, left, bottom);\n          };\n\n          CanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n            var shape = [\n              ['line', Math.round(left), Math.round(top)],\n              ['line', Math.round(left + width), Math.round(top)],\n              ['line', Math.round(left + width), Math.round(height + top)],\n              ['line', Math.round(left), Math.round(height + top)]\n            ];\n            this.clip(\n              [shape],\n              function() {\n                this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n              },\n              this\n            );\n          };\n\n          CanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n            var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft),\n              offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n            this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), 'repeat'));\n            this.ctx.translate(offsetX, offsetY);\n            this.ctx.fill();\n            this.ctx.translate(-offsetX, -offsetY);\n          };\n\n          CanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n            if (gradientImage instanceof LinearGradientContainer) {\n              var gradient = this.ctx.createLinearGradient(\n                bounds.left + bounds.width * gradientImage.x0,\n                bounds.top + bounds.height * gradientImage.y0,\n                bounds.left + bounds.width * gradientImage.x1,\n                bounds.top + bounds.height * gradientImage.y1\n              );\n              gradientImage.colorStops.forEach(function(colorStop) {\n                gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n              });\n              this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n            }\n          };\n\n          CanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n            var image = imageContainer.image;\n            if (image.width === size.width && image.height === size.height) {\n              return image;\n            }\n\n            var ctx,\n              canvas = document.createElement('canvas');\n            canvas.width = size.width;\n            canvas.height = size.height;\n            ctx = canvas.getContext('2d');\n            ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height);\n            return canvas;\n          };\n\n          function hasEntries(array) {\n            return array.length > 0;\n          }\n\n          module.exports = CanvasRenderer;\n        },\n        { '../lineargradientcontainer': 12, '../log': 13, '../renderer': 19 }\n      ],\n      21: [\n        function(_dereq_, module, exports) {\n          var NodeContainer = _dereq_('./nodecontainer');\n\n          function StackingContext(hasOwnStacking, opacity, element, parent) {\n            NodeContainer.call(this, element, parent);\n            this.ownStacking = hasOwnStacking;\n            this.contexts = [];\n            this.children = [];\n            this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n          }\n\n          StackingContext.prototype = Object.create(NodeContainer.prototype);\n\n          StackingContext.prototype.getParentStack = function(context) {\n            var parentStack = this.parent ? this.parent.stack : null;\n            return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n          };\n\n          module.exports = StackingContext;\n        },\n        { './nodecontainer': 14 }\n      ],\n      22: [\n        function(_dereq_, module, exports) {\n          function Support(document) {\n            this.rangeBounds = this.testRangeBounds(document);\n            this.cors = this.testCORS();\n            this.svg = this.testSVG();\n          }\n\n          Support.prototype.testRangeBounds = function(document) {\n            var range,\n              testElement,\n              rangeBounds,\n              rangeHeight,\n              support = false;\n\n            if (document.createRange) {\n              range = document.createRange();\n              if (range.getBoundingClientRect) {\n                testElement = document.createElement('boundtest');\n                testElement.style.height = '123px';\n                testElement.style.display = 'block';\n                document.body.appendChild(testElement);\n\n                range.selectNode(testElement);\n                rangeBounds = range.getBoundingClientRect();\n                rangeHeight = rangeBounds.height;\n\n                if (rangeHeight === 123) {\n                  support = true;\n                }\n                document.body.removeChild(testElement);\n              }\n            }\n\n            return support;\n          };\n\n          Support.prototype.testCORS = function() {\n            return typeof new Image().crossOrigin !== 'undefined';\n          };\n\n          Support.prototype.testSVG = function() {\n            var img = new Image();\n            var canvas = document.createElement('canvas');\n            var ctx = canvas.getContext('2d');\n            img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n            try {\n              ctx.drawImage(img, 0, 0);\n              canvas.toDataURL();\n            } catch (e) {\n              return false;\n            }\n            return true;\n          };\n\n          module.exports = Support;\n        },\n        {}\n      ],\n      23: [\n        function(_dereq_, module, exports) {\n          var XHR = _dereq_('./xhr');\n          var decode64 = _dereq_('./utils').decode64;\n\n          function SVGContainer(src) {\n            this.src = src;\n            this.image = null;\n            var self = this;\n\n            this.promise = this.hasFabric()\n              .then(function() {\n                return self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src);\n              })\n              .then(function(svg) {\n                return new Promise(function(resolve) {\n                  window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n                });\n              });\n          }\n\n          SVGContainer.prototype.hasFabric = function() {\n            return !window.html2canvas.svg || !window.html2canvas.svg.fabric\n              ? Promise.reject(new Error('html2canvas.svg.js is not loaded, cannot render svg'))\n              : Promise.resolve();\n          };\n\n          SVGContainer.prototype.inlineFormatting = function(src) {\n            return /^data:image\\/svg\\+xml;base64,/.test(src) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n          };\n\n          SVGContainer.prototype.removeContentType = function(src) {\n            return src.replace(/^data:image\\/svg\\+xml(;base64)?,/, '');\n          };\n\n          SVGContainer.prototype.isInline = function(src) {\n            return /^data:image\\/svg\\+xml/i.test(src);\n          };\n\n          SVGContainer.prototype.createCanvas = function(resolve) {\n            var self = this;\n            return function(objects, options) {\n              var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\n              self.image = canvas.lowerCanvasEl;\n              canvas\n                .setWidth(options.width)\n                .setHeight(options.height)\n                .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\n                .renderAll();\n              resolve(canvas.lowerCanvasEl);\n            };\n          };\n\n          SVGContainer.prototype.decode64 = function(str) {\n            return typeof window.atob === 'function' ? window.atob(str) : decode64(str);\n          };\n\n          module.exports = SVGContainer;\n        },\n        { './utils': 26, './xhr': 28 }\n      ],\n      24: [\n        function(_dereq_, module, exports) {\n          var SVGContainer = _dereq_('./svgcontainer');\n\n          function SVGNodeContainer(node, _native) {\n            this.src = node;\n            this.image = null;\n            var self = this;\n\n            this.promise = _native\n              ? new Promise(function(resolve, reject) {\n                  self.image = new Image();\n                  self.image.onload = resolve;\n                  self.image.onerror = reject;\n                  self.image.src = 'data:image/svg+xml,' + new XMLSerializer().serializeToString(node);\n                  if (self.image.complete === true) {\n                    resolve(self.image);\n                  }\n                })\n              : this.hasFabric().then(function() {\n                  return new Promise(function(resolve) {\n                    window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n                  });\n                });\n          }\n\n          SVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\n          module.exports = SVGNodeContainer;\n        },\n        { './svgcontainer': 23 }\n      ],\n      25: [\n        function(_dereq_, module, exports) {\n          var NodeContainer = _dereq_('./nodecontainer');\n\n          function TextContainer(node, parent) {\n            NodeContainer.call(this, node, parent);\n          }\n\n          TextContainer.prototype = Object.create(NodeContainer.prototype);\n\n          TextContainer.prototype.applyTextTransform = function() {\n            this.node.data = this.transform(this.parent.css('textTransform'));\n          };\n\n          TextContainer.prototype.transform = function(transform) {\n            var text = this.node.data;\n            switch (transform) {\n              case 'lowercase':\n                return text.toLowerCase();\n              case 'capitalize':\n                return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n              case 'uppercase':\n                return text.toUpperCase();\n              default:\n                return text;\n            }\n          };\n\n          function capitalize(m, p1, p2) {\n            if (m.length > 0) {\n              return p1 + p2.toUpperCase();\n            }\n          }\n\n          module.exports = TextContainer;\n        },\n        { './nodecontainer': 14 }\n      ],\n      26: [\n        function(_dereq_, module, exports) {\n          exports.smallImage = function smallImage() {\n            return 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n          };\n\n          exports.bind = function(callback, context) {\n            return function() {\n              return callback.apply(context, arguments);\n            };\n          };\n\n          /*\n           * base64-arraybuffer\n           * https://github.com/niklasvh/base64-arraybuffer\n           *\n           * Copyright (c) 2012 Niklas von Hertzen\n           * Licensed under the MIT license.\n           */\n\n          exports.decode64 = function(base64) {\n            var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n            var len = base64.length,\n              i,\n              encoded1,\n              encoded2,\n              encoded3,\n              encoded4,\n              byte1,\n              byte2,\n              byte3;\n\n            var output = '';\n\n            for (i = 0; i < len; i += 4) {\n              encoded1 = chars.indexOf(base64[i]);\n              encoded2 = chars.indexOf(base64[i + 1]);\n              encoded3 = chars.indexOf(base64[i + 2]);\n              encoded4 = chars.indexOf(base64[i + 3]);\n\n              byte1 = (encoded1 << 2) | (encoded2 >> 4);\n              byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n              byte3 = ((encoded3 & 3) << 6) | encoded4;\n              if (encoded3 === 64) {\n                output += String.fromCharCode(byte1);\n              } else if (encoded4 === 64 || encoded4 === -1) {\n                output += String.fromCharCode(byte1, byte2);\n              } else {\n                output += String.fromCharCode(byte1, byte2, byte3);\n              }\n            }\n\n            return output;\n          };\n\n          exports.getBounds = function(node) {\n            if (node.getBoundingClientRect) {\n              var clientRect = node.getBoundingClientRect();\n              var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n              return {\n                top: clientRect.top,\n                bottom: clientRect.bottom || clientRect.top + clientRect.height,\n                right: clientRect.left + width,\n                left: clientRect.left,\n                width: width,\n                height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n              };\n            }\n            return {};\n          };\n\n          exports.offsetBounds = function(node) {\n            var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : { top: 0, left: 0 };\n\n            return {\n              top: node.offsetTop + parent.top,\n              bottom: node.offsetTop + node.offsetHeight + parent.top,\n              right: node.offsetLeft + parent.left + node.offsetWidth,\n              left: node.offsetLeft + parent.left,\n              width: node.offsetWidth,\n              height: node.offsetHeight\n            };\n          };\n\n          exports.parseBackgrounds = function(backgroundImage) {\n            var whitespace = ' \\r\\n\\t',\n              method,\n              definition,\n              prefix,\n              prefix_i,\n              block,\n              results = [],\n              mode = 0,\n              numParen = 0,\n              quote,\n              args;\n            var appendResult = function() {\n              if (method) {\n                if (definition.substr(0, 1) === '\"') {\n                  definition = definition.substr(1, definition.length - 2);\n                }\n                if (definition) {\n                  args.push(definition);\n                }\n                if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1) + 1) > 0) {\n                  prefix = method.substr(0, prefix_i);\n                  method = method.substr(prefix_i);\n                }\n                results.push({\n                  prefix: prefix,\n                  method: method.toLowerCase(),\n                  value: block,\n                  args: args,\n                  image: null\n                });\n              }\n              args = [];\n              method = prefix = definition = block = '';\n            };\n            args = [];\n            method = prefix = definition = block = '';\n            backgroundImage.split('').forEach(function(c) {\n              if (mode === 0 && whitespace.indexOf(c) > -1) {\n                return;\n              }\n              switch (c) {\n                case '\"':\n                  if (!quote) {\n                    quote = c;\n                  } else if (quote === c) {\n                    quote = null;\n                  }\n                  break;\n                case '(':\n                  if (quote) {\n                    break;\n                  } else if (mode === 0) {\n                    mode = 1;\n                    block += c;\n                    return;\n                  } else {\n                    numParen++;\n                  }\n                  break;\n                case ')':\n                  if (quote) {\n                    break;\n                  } else if (mode === 1) {\n                    if (numParen === 0) {\n                      mode = 0;\n                      block += c;\n                      appendResult();\n                      return;\n                    } else {\n                      numParen--;\n                    }\n                  }\n                  break;\n\n                case ',':\n                  if (quote) {\n                    break;\n                  } else if (mode === 0) {\n                    appendResult();\n                    return;\n                  } else if (mode === 1) {\n                    if (numParen === 0 && !method.match(/^url$/i)) {\n                      args.push(definition);\n                      definition = '';\n                      block += c;\n                      return;\n                    }\n                  }\n                  break;\n              }\n\n              block += c;\n              if (mode === 0) {\n                method += c;\n              } else {\n                definition += c;\n              }\n            });\n\n            appendResult();\n            return results;\n          };\n        },\n        {}\n      ],\n      27: [\n        function(_dereq_, module, exports) {\n          var GradientContainer = _dereq_('./gradientcontainer');\n\n          function WebkitGradientContainer(imageData) {\n            GradientContainer.apply(this, arguments);\n            this.type = imageData.args[0] === 'linear' ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\n          }\n\n          WebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\n          module.exports = WebkitGradientContainer;\n        },\n        { './gradientcontainer': 9 }\n      ],\n      28: [\n        function(_dereq_, module, exports) {\n          function XHR(url) {\n            return new Promise(function(resolve, reject) {\n              var xhr = new XMLHttpRequest();\n              xhr.open('GET', url);\n\n              xhr.onload = function() {\n                if (xhr.status === 200) {\n                  resolve(xhr.responseText);\n                } else {\n                  reject(new Error(xhr.statusText));\n                }\n              };\n\n              xhr.onerror = function() {\n                reject(new Error('Network Error'));\n              };\n\n              xhr.send();\n            });\n          }\n\n          module.exports = XHR;\n        },\n        {}\n      ]\n    },\n    {},\n    [4]\n  )(4);\n});\n"]}